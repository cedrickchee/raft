seed 1617633537359768036
=== RUN   TestElectionBasic
22:38:57.362047 [0] listening at [::]:40555
22:38:57.362807 [1] listening at [::]:38553
22:38:57.363592 [2] listening at [::]:44889
22:38:57.369454 [2] election timer started (166ms), term=0
22:38:57.369608 [0] election timer started (156ms), term=0
22:38:57.369612 [1] election timer started (168ms), term=0
22:38:57.530198 [0] becomes Candidate (currentTerm=1); log=[]
22:38:57.530873 [0] election timer started (151ms), term=1
22:38:57.530975 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:57.530979 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:57.534362 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:38:57.534406 [1] ... term out of date in RequestVote
22:38:57.534444 [1] becomes Follower with term=1; log=[]
22:38:57.535087 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:38:57.535330 [1] election timer started (245ms), term=1
22:38:57.536235 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:38:57.536293 [0] wins election with 2 votes
22:38:57.536371 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:38:57.536896 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.536897 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.537342 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:38:57.537386 [2] ... term out of date in RequestVote
22:38:57.537424 [2] becomes Follower with term=1; log=[]
22:38:57.537916 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:38:57.538177 [2] election timer started (159ms), term=1
22:38:57.538939 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:38:57.539000 [0] while waiting for reply, state = Leader
22:38:57.540700 [1] in election timer term changed from 0 to 1, bailing out
22:38:57.541009 [0] in election timer state=Leader, bailing out
22:38:57.541031 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.541332 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.541468 [2] in election timer term changed from 0 to 1, bailing out
22:38:57.542032 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.544057 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.544300 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.544758 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.588220 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.588280 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.591075 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.591333 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.591702 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.593752 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.593962 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.594279 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.639143 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.639147 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.641135 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.641398 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.641838 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.645099 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.645345 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.645714 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.670895 [0] becomes Dead
22:38:57.671040 [1] becomes Dead
22:38:57.671100 [0] commitChanSender done
22:38:57.671141 [1] commitChanSender done
22:38:57.671263 [2] becomes Dead
22:38:57.671447 [2] commitChanSender done
--- PASS: TestElectionBasic (0.31s)
=== RUN   TestElectionLeaderDisconnect
22:38:57.672613 [0] listening at [::]:37713
22:38:57.673198 [1] listening at [::]:37013
22:38:57.673778 [2] listening at [::]:41209
22:38:57.675753 [1] in election timer state=Dead, bailing out
22:38:57.678339 [2] in election timer state=Dead, bailing out
22:38:57.678516 [2] election timer started (176ms), term=0
22:38:57.678595 [0] election timer started (159ms), term=0
22:38:57.678653 [1] election timer started (277ms), term=0
22:38:57.839499 [0] becomes Candidate (currentTerm=1); log=[]
22:38:57.840035 [0] election timer started (273ms), term=1
22:38:57.840067 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:57.840165 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:57.842698 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:38:57.842747 [1] ... term out of date in RequestVote
22:38:57.842787 [1] becomes Follower with term=1; log=[]
22:38:57.843234 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:38:57.843471 [1] election timer started (256ms), term=1
22:38:57.844191 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:38:57.844245 [0] wins election with 2 votes
22:38:57.844298 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:38:57.844353 [2] ... term out of date in RequestVote
22:38:57.844377 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:38:57.844393 [2] becomes Follower with term=1; log=[]
22:38:57.844919 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.844973 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:38:57.845035 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.845135 [2] election timer started (252ms), term=1
22:38:57.846110 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:38:57.846176 [0] while waiting for reply, state = Leader
22:38:57.847151 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.847460 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.847963 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.848814 [2] in election timer term changed from 0 to 1, bailing out
22:38:57.848830 [1] in election timer term changed from 0 to 1, bailing out
22:38:57.851118 [0] in election timer state=Leader, bailing out
22:38:57.852338 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.852619 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.853150 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.896167 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.896194 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.900205 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.900522 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.900975 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.901951 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.902205 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.902576 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.947280 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.947288 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.953321 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.953359 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.953642 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.953663 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:57.954101 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.954246 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:57.979274 [TEST] Disconnect 0
22:38:57.998390 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:57.998401 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.049251 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.049377 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.100147 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.100149 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.150173 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.150338 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.201162 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.201200 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.206213 [2] becomes Candidate (currentTerm=2); log=[]
22:38:58.206640 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.206654 [2] election timer started (288ms), term=2
22:38:58.206689 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.210967 [1] RequestVote: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
22:38:58.211000 [1] ... term out of date in RequestVote
22:38:58.211026 [1] becomes Follower with term=2; log=[]
22:38:58.211307 [1] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:38:58.211478 [1] election timer started (259ms), term=2
22:38:58.212298 [2] received RequestVoteReply {Term:2 VoteGranted:true}
22:38:58.212369 [2] wins election with 2 votes
22:38:58.212507 [2] becomes Leader; term=2, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:38:58.212842 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.212938 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.213703 [1] in election timer term changed from 1 to 2, bailing out
22:38:58.217615 [2] in election timer state=Leader, bailing out
22:38:58.217740 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.218034 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:58.218636 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:38:58.251707 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.251743 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.264062 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.264146 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.267436 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.267810 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:58.268275 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:38:58.302427 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.302444 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.315082 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.315174 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.320588 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.320920 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:58.321342 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:38:58.330820 [0] becomes Dead
22:38:58.330921 [0] commitChanSender done
22:38:58.331004 [1] becomes Dead
22:38:58.331107 [1] commitChanSender done
22:38:58.331121 [2] becomes Dead
22:38:58.331237 [2] commitChanSender done
--- PASS: TestElectionLeaderDisconnect (0.66s)
=== RUN   TestElectionLeaderAndAnotherDisconnect
22:38:58.331846 [1] in election timer state=Dead, bailing out
22:38:58.332259 [0] listening at [::]:45951
22:38:58.332711 [1] listening at [::]:34463
22:38:58.333119 [2] listening at [::]:40189
22:38:58.336866 [2] election timer started (230ms), term=0
22:38:58.336899 [0] election timer started (214ms), term=0
22:38:58.336997 [1] election timer started (204ms), term=0
22:38:58.547951 [1] becomes Candidate (currentTerm=1); log=[]
22:38:58.548356 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.548396 [1] election timer started (237ms), term=1
22:38:58.548453 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.551287 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:38:58.551339 [2] ... term out of date in RequestVote
22:38:58.551383 [2] becomes Follower with term=1; log=[]
22:38:58.551738 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:38:58.551977 [2] election timer started (222ms), term=1
22:38:58.552150 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:38:58.552214 [0] ... term out of date in RequestVote
22:38:58.552264 [0] becomes Follower with term=1; log=[]
22:38:58.552616 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:38:58.552743 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:38:58.552807 [1] wins election with 2 votes
22:38:58.552835 [0] election timer started (292ms), term=1
22:38:58.552935 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:38:58.553497 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.553530 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.553607 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:38:58.553675 [1] while waiting for reply, state = Leader
22:38:58.557194 [2] in election timer term changed from 0 to 1, bailing out
22:38:58.557296 [0] in election timer term changed from 0 to 1, bailing out
22:38:58.559474 [1] in election timer state=Leader, bailing out
22:38:58.559594 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.559614 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.559906 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:58.559941 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:58.560499 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:38:58.560625 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:38:58.604136 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.604182 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.608221 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.608523 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:58.608985 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:38:58.609935 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.610189 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:58.610531 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:38:58.638471 [TEST] Disconnect 1
22:38:58.639199 [TEST] Disconnect 2
22:38:58.654648 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.654741 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.704764 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.704813 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.755908 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.755937 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.806412 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.806477 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.832205 [2] becomes Candidate (currentTerm=2); log=[]
22:38:58.832767 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.832800 [2] election timer started (294ms), term=2
22:38:58.832850 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.856553 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.856669 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.903723 [0] becomes Candidate (currentTerm=2); log=[]
22:38:58.904225 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.904252 [0] election timer started (214ms), term=2
22:38:58.904279 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:58.907077 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.907130 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.957593 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:58.957646 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.007939 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.008008 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.059079 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.059088 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.089965 [TEST] Reconnect 2
22:38:59.109827 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.109843 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.117397 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.117845 [2] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:38:59.119274 [1] term out of date in heartbeat reply
22:38:59.119352 [1] becomes Follower with term=2; log=[]
22:38:59.119692 [1] election timer started (241ms), term=2
22:38:59.124787 [0] becomes Candidate (currentTerm=3); log=[]
22:38:59.125394 [0] sending RequestVote to 2: {Term:3 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.125453 [0] election timer started (191ms), term=3
22:38:59.125491 [0] sending RequestVote to 1: {Term:3 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.131524 [2] RequestVote: {Term:3 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
22:38:59.131634 [2] ... term out of date in RequestVote
22:38:59.131693 [2] becomes Follower with term=3; log=[]
22:38:59.132126 [2] ... RequestVote reply: &{Term:3 VoteGranted:true}
22:38:59.132367 [2] election timer started (247ms), term=3
22:38:59.133391 [2] in election timer term changed from 2 to 3, bailing out
22:38:59.133394 [0] received RequestVoteReply {Term:3 VoteGranted:true}
22:38:59.133616 [0] wins election with 2 votes
22:38:59.133739 [0] becomes Leader; term=3, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:38:59.134204 [0] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.134264 [0] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.135662 [0] in election timer state=Leader, bailing out
22:38:59.137156 [2] AppendEntries: {Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.137582 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:59.138361 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:59.185163 [0] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.185170 [0] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.187542 [2] AppendEntries: {Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.188186 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:59.188989 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:59.235361 [0] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.235731 [0] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.241575 [2] AppendEntries: {Term:3 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.241765 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:59.242179 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:38:59.244472 [0] becomes Dead
22:38:59.244537 [0] commitChanSender done
22:38:59.244550 [1] becomes Dead
22:38:59.244642 [1] commitChanSender done
22:38:59.244812 [2] becomes Dead
22:38:59.244989 [2] commitChanSender done
--- PASS: TestElectionLeaderAndAnotherDisconnect (0.91s)
=== RUN   TestDisconnectAllThenRestore
22:38:59.245773 [0] listening at [::]:42551
22:38:59.246147 [1] listening at [::]:43845
22:38:59.246463 [2] listening at [::]:39833
22:38:59.249037 [0] election timer started (278ms), term=0
22:38:59.249065 [2] election timer started (226ms), term=0
22:38:59.249065 [1] election timer started (296ms), term=0
22:38:59.249855 [1] in election timer state=Dead, bailing out
22:38:59.253077 [2] in election timer state=Dead, bailing out
22:38:59.350009 [TEST] Disconnect 0
22:38:59.350474 [TEST] Disconnect 1
22:38:59.350759 [TEST] Disconnect 2
22:38:59.479616 [2] becomes Candidate (currentTerm=1); log=[]
22:38:59.480006 [2] election timer started (237ms), term=1
22:38:59.480008 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.480115 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.530131 [0] becomes Candidate (currentTerm=1); log=[]
22:38:59.530675 [0] election timer started (202ms), term=1
22:38:59.530760 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.530712 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.549846 [1] becomes Candidate (currentTerm=1); log=[]
22:38:59.550393 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.550462 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.550400 [1] election timer started (265ms), term=1
22:38:59.720099 [2] becomes Candidate (currentTerm=2); log=[]
22:38:59.720406 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.720419 [2] election timer started (199ms), term=2
22:38:59.720511 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.740995 [0] becomes Candidate (currentTerm=2); log=[]
22:38:59.741419 [0] election timer started (298ms), term=2
22:38:59.741451 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.741473 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.801142 [TEST] Reconnect 0
22:38:59.803739 [TEST] Reconnect 1
22:38:59.804964 [TEST] Reconnect 2
22:38:59.821433 [1] becomes Candidate (currentTerm=2); log=[]
22:38:59.821849 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.821856 [1] election timer started (276ms), term=2
22:38:59.821916 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.826852 [0] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=0, log index/term=(-1, -1)]
22:38:59.827223 [0] ... RequestVote reply: &{Term:2 VoteGranted:false}
22:38:59.827812 [2] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
22:38:59.828139 [2] ... RequestVote reply: &{Term:2 VoteGranted:false}
22:38:59.828455 [1] received RequestVoteReply {Term:2 VoteGranted:false}
22:38:59.829298 [1] received RequestVoteReply {Term:2 VoteGranted:false}
22:38:59.920707 [2] becomes Candidate (currentTerm=3); log=[]
22:38:59.921161 [2] election timer started (172ms), term=3
22:38:59.921184 [2] sending RequestVote to 0: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.921170 [2] sending RequestVote to 1: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:38:59.925309 [0] RequestVote: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=0, log index/term=(-1, -1)]
22:38:59.925355 [0] ... term out of date in RequestVote
22:38:59.925393 [0] becomes Follower with term=3; log=[]
22:38:59.925773 [0] ... RequestVote reply: &{Term:3 VoteGranted:true}
22:38:59.925936 [0] election timer started (172ms), term=3
22:38:59.926795 [2] received RequestVoteReply {Term:3 VoteGranted:true}
22:38:59.926853 [2] wins election with 2 votes
22:38:59.926979 [2] becomes Leader; term=3, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:38:59.927432 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.927481 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.927882 [1] RequestVote: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=1, log index/term=(-1, -1)]
22:38:59.927927 [1] ... term out of date in RequestVote
22:38:59.927962 [1] becomes Follower with term=3; log=[]
22:38:59.928319 [1] ... RequestVote reply: &{Term:3 VoteGranted:true}
22:38:59.928522 [1] election timer started (199ms), term=3
22:38:59.929288 [2] received RequestVoteReply {Term:3 VoteGranted:true}
22:38:59.929351 [2] while waiting for reply, state = Leader
22:38:59.929873 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.930156 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:59.930687 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:38:59.931588 [2] in election timer state=Leader, bailing out
22:38:59.931681 [0] in election timer term changed from 2 to 3, bailing out
22:38:59.932765 [1] in election timer term changed from 2 to 3, bailing out
22:38:59.933984 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:38:59.934216 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:38:59.934769 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:38:59.956710 [0] becomes Dead
22:38:59.956914 [0] commitChanSender done
22:38:59.957029 [1] becomes Dead
22:38:59.957178 [1] commitChanSender done
22:38:59.957201 [2] becomes Dead
22:38:59.957313 [2] commitChanSender done
--- PASS: TestDisconnectAllThenRestore (0.71s)
=== RUN   TestElectionLeaderDisconnectThenReconnect
22:38:59.958537 [0] listening at [::]:36807
22:38:59.958917 [1] in election timer state=Dead, bailing out
22:38:59.959262 [1] listening at [::]:35565
22:38:59.959800 [2] listening at [::]:36013
22:38:59.964495 [1] election timer started (283ms), term=0
22:38:59.964516 [0] election timer started (272ms), term=0
22:38:59.964614 [2] election timer started (295ms), term=0
22:38:59.966253 [0] in election timer state=Dead, bailing out
22:39:00.245601 [0] becomes Candidate (currentTerm=1); log=[]
22:39:00.246322 [0] election timer started (255ms), term=1
22:39:00.246345 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.246353 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.250000 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:00.250133 [1] ... term out of date in RequestVote
22:39:00.250174 [1] becomes Follower with term=1; log=[]
22:39:00.250574 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:00.250810 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:00.250882 [2] ... term out of date in RequestVote
22:39:00.250964 [2] becomes Follower with term=1; log=[]
22:39:00.250889 [1] election timer started (238ms), term=1
22:39:00.251369 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:00.251555 [2] election timer started (243ms), term=1
22:39:00.251665 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:00.251722 [0] wins election with 2 votes
22:39:00.251841 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:39:00.252261 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.252278 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.252315 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:00.252409 [0] while waiting for reply, state = Leader
22:39:00.254969 [2] in election timer term changed from 0 to 1, bailing out
22:39:00.255046 [1] in election timer term changed from 0 to 1, bailing out
22:39:00.257271 [0] in election timer state=Leader, bailing out
22:39:00.257343 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.257582 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.258120 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:00.258991 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.259239 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.259742 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:00.266000 [TEST] Disconnect 0
22:39:00.303194 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.303198 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.353825 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.354120 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.404404 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.404438 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.455421 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.455521 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.501258 [1] becomes Candidate (currentTerm=2); log=[]
22:39:00.501708 [2] becomes Candidate (currentTerm=2); log=[]
22:39:00.501847 [1] election timer started (274ms), term=2
22:39:00.501888 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.502043 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.502419 [2] election timer started (288ms), term=2
22:39:00.502457 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.502426 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.505492 [2] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
22:39:00.505761 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.505879 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.505902 [2] ... RequestVote reply: &{Term:2 VoteGranted:false}
22:39:00.507665 [1] RequestVote: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=1, log index/term=(-1, -1)]
22:39:00.508016 [1] ... RequestVote reply: &{Term:2 VoteGranted:false}
22:39:00.508172 [1] received RequestVoteReply {Term:2 VoteGranted:false}
22:39:00.508872 [2] received RequestVoteReply {Term:2 VoteGranted:false}
22:39:00.556214 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.556216 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.606961 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.606972 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.657601 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.657648 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.708355 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.708375 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.759328 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.759331 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.782052 [1] becomes Candidate (currentTerm=3); log=[]
22:39:00.782635 [1] election timer started (267ms), term=3
22:39:00.782651 [1] sending RequestVote to 2: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.782679 [1] sending RequestVote to 0: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:00.788794 [2] RequestVote: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
22:39:00.788863 [2] ... term out of date in RequestVote
22:39:00.788901 [2] becomes Follower with term=3; log=[]
22:39:00.789237 [2] ... RequestVote reply: &{Term:3 VoteGranted:true}
22:39:00.789413 [2] election timer started (257ms), term=3
22:39:00.789618 [1] received RequestVoteReply {Term:3 VoteGranted:true}
22:39:00.789673 [1] wins election with 2 votes
22:39:00.789781 [1] becomes Leader; term=3, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:00.790116 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.790214 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.793255 [1] in election timer state=Leader, bailing out
22:39:00.793354 [2] in election timer term changed from 2 to 3, bailing out
22:39:00.796629 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.796884 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.797418 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:00.810108 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.810123 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.841063 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.841168 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.843022 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.843324 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.843698 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:00.860330 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.860371 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.891177 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.891190 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.895155 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.895548 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.896045 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:00.910613 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.910640 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.918615 [TEST] Reconnect 0
22:39:00.941297 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.941338 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.945204 [0] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.945248 [0] ... term out of date in AppendEntries
22:39:00.945291 [0] becomes Follower with term=3; log=[]
22:39:00.945802 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.945812 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.946055 [0] election timer started (218ms), term=3
22:39:00.946191 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.946615 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:00.946993 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:00.991749 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.991757 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.994726 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.995149 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.995631 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:00.997724 [0] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:00.997992 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:00.998356 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:01.042688 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.042744 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.044682 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.045063 [2] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.045557 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:01.047607 [0] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.047886 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.048275 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:01.073321 [0] becomes Dead
22:39:01.073536 [0] commitChanSender done
22:39:01.073579 [1] becomes Dead
22:39:01.073729 [2] becomes Dead
22:39:01.073794 [1] commitChanSender done
22:39:01.073836 [2] commitChanSender done
--- PASS: TestElectionLeaderDisconnectThenReconnect (1.12s)
=== RUN   TestElectionLeaderDisconnectThenReconnect5
22:39:01.077308 [0] in election timer state=Dead, bailing out
22:39:01.079615 [2] in election timer state=Dead, bailing out
22:39:01.079752 [0] listening at [::]:34885
22:39:01.080186 [1] listening at [::]:37597
22:39:01.080640 [2] listening at [::]:40765
22:39:01.081030 [3] listening at [::]:41317
22:39:01.081392 [4] listening at [::]:40541
22:39:01.093069 [2] election timer started (203ms), term=0
22:39:01.093093 [1] election timer started (186ms), term=0
22:39:01.093098 [0] election timer started (284ms), term=0
22:39:01.093208 [3] election timer started (165ms), term=0
22:39:01.093218 [4] election timer started (275ms), term=0
22:39:01.263484 [3] becomes Candidate (currentTerm=1); log=[]
22:39:01.264423 [3] sending RequestVote to 0: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.264495 [3] sending RequestVote to 1: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.264503 [3] election timer started (234ms), term=1
22:39:01.264683 [3] sending RequestVote to 2: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.264750 [3] sending RequestVote to 4: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.269709 [4] RequestVote: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:01.269758 [4] ... term out of date in RequestVote
22:39:01.269795 [4] becomes Follower with term=1; log=[]
22:39:01.270163 [4] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:01.270384 [0] RequestVote: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:01.270390 [4] election timer started (170ms), term=1
22:39:01.270481 [0] ... term out of date in RequestVote
22:39:01.270518 [1] RequestVote: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:01.270570 [0] becomes Follower with term=1; log=[]
22:39:01.270589 [1] ... term out of date in RequestVote
22:39:01.270682 [1] becomes Follower with term=1; log=[]
22:39:01.271012 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:01.271114 [3] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:01.271153 [0] election timer started (288ms), term=1
22:39:01.271121 [2] RequestVote: {Term:1 CandidateId:3 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:01.271242 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:01.271345 [1] election timer started (276ms), term=1
22:39:01.271253 [2] ... term out of date in RequestVote
22:39:01.271453 [2] becomes Follower with term=1; log=[]
22:39:01.271811 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:01.272003 [2] election timer started (299ms), term=1
22:39:01.272055 [3] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:01.272113 [3] wins election with 3 votes
22:39:01.272245 [3] becomes Leader; term=1, nextIndex=map[0:0 1:0 2:0 4:0], matchIndex=map[0:-1 1:-1 2:-1 4:-1]; log=[]
22:39:01.272455 [3] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:01.272524 [3] while waiting for reply, state = Leader
22:39:01.272634 [3] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:01.272697 [3] while waiting for reply, state = Leader
22:39:01.272836 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.272847 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.272994 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.272870 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.273220 [2] in election timer term changed from 0 to 1, bailing out
22:39:01.273657 [1] in election timer term changed from 0 to 1, bailing out
22:39:01.273732 [0] in election timer term changed from 0 to 1, bailing out
22:39:01.273776 [4] in election timer term changed from 0 to 1, bailing out
22:39:01.275269 [3] in election timer state=Leader, bailing out
22:39:01.275282 [1] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.275541 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.275839 [2] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.276049 [3] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.276060 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.276619 [3] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.278691 [4] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.278931 [4] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.279233 [0] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.279426 [3] AppendEntries reply from 4 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.279449 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.279926 [3] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.323420 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.323501 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.323551 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.323502 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.325333 [2] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.325602 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.326025 [3] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.328155 [4] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.328379 [4] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.328702 [3] AppendEntries reply from 4 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.329768 [0] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.329769 [1] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.330117 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.330142 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.330541 [3] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.330682 [3] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.373900 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.373955 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.374058 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.374090 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.377065 [4] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.377264 [4] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.377586 [3] AppendEntries reply from 4 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.378604 [0] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.378847 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.379149 [3] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.380208 [2] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.380292 [1] AppendEntries: {Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.380455 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.380532 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.380861 [3] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.381015 [3] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 4:0], matchIndex := map[0:-1 1:-1 2:-1 4:-1]; commitIndex := -1
22:39:01.394665 [TEST] Disconnect 3
22:39:01.424406 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.424621 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.424702 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.424805 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.474690 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.474955 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.474977 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.475191 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.525734 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.525976 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.526071 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.525981 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.551336 [4] becomes Candidate (currentTerm=2); log=[]
22:39:01.552291 [4] sending RequestVote to 1: {Term:2 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.552339 [4] sending RequestVote to 3: {Term:2 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.552431 [4] sending RequestVote to 0: {Term:2 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.552299 [4] sending RequestVote to 2: {Term:2 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:01.552301 [4] election timer started (287ms), term=2
22:39:01.557573 [0] RequestVote: {Term:2 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=3, log index/term=(-1, -1)]
22:39:01.557677 [0] ... term out of date in RequestVote
22:39:01.557766 [0] becomes Follower with term=2; log=[]
22:39:01.558332 [0] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:01.558661 [0] election timer started (151ms), term=2
22:39:01.558994 [2] RequestVote: {Term:2 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=3, log index/term=(-1, -1)]
22:39:01.559082 [2] ... term out of date in RequestVote
22:39:01.559174 [2] becomes Follower with term=2; log=[]
22:39:01.559825 [2] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:01.559935 [4] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:01.560199 [2] election timer started (205ms), term=2
22:39:01.560382 [1] RequestVote: {Term:2 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=3, log index/term=(-1, -1)]
22:39:01.560440 [1] ... term out of date in RequestVote
22:39:01.560491 [1] becomes Follower with term=2; log=[]
22:39:01.560894 [1] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:01.561076 [1] election timer started (213ms), term=2
22:39:01.561161 [4] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:01.561238 [4] wins election with 3 votes
22:39:01.561430 [0] in election timer term changed from 1 to 2, bailing out
22:39:01.561450 [4] becomes Leader; term=2, nextIndex=map[0:0 1:0 2:0 3:0], matchIndex=map[0:-1 1:-1 2:-1 3:-1]; log=[]
22:39:01.561533 [1] in election timer term changed from 1 to 2, bailing out
22:39:01.562102 [4] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.562375 [4] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:01.562481 [4] while waiting for reply, state = Leader
22:39:01.562500 [2] in election timer term changed from 1 to 2, bailing out
22:39:01.562667 [4] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.562712 [4] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.562803 [4] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.563148 [4] in election timer state=Leader, bailing out
22:39:01.564322 [2] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.564589 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.564974 [0] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.565314 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.565320 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.565958 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.566917 [1] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.567303 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.568143 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.577037 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.577042 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.577149 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.577069 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.613177 [4] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.613253 [4] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.613438 [4] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.613534 [4] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.616100 [1] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.616391 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.616797 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.619031 [2] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.619070 [0] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.619691 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.619695 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.620420 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.620628 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.627921 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.628004 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.627925 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.627938 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.664144 [4] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.664236 [4] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.664279 [4] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.664238 [4] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.667035 [0] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.667398 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.667936 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.668109 [1] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.668114 [2] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.668441 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.668536 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.668900 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.669143 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.678841 [3] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.678942 [3] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.678952 [3] sending AppendEntries to 4: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.678959 [3] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:3 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.696546 [TEST] Reconnect 3
22:39:01.714982 [4] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.715047 [4] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.715154 [4] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.715053 [4] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.718415 [1] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.718784 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.719194 [2] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.719364 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.719650 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.719985 [0] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.720110 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.720276 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.720747 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.722861 [3] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.722905 [3] ... term out of date in AppendEntries
22:39:01.722937 [3] becomes Follower with term=2; log=[]
22:39:01.723321 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.723570 [3] election timer started (176ms), term=2
22:39:01.724575 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.765096 [4] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.765096 [4] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.765257 [4] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.765186 [4] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.768220 [3] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.768522 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.768797 [1] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.768885 [2] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.769006 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.769143 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.769220 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.769585 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.769732 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.771807 [0] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.772051 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.772405 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.816031 [4] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.816086 [4] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.816133 [4] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.816080 [4] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.819036 [1] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.819325 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.819698 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.819838 [2] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.820110 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.820463 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.821551 [0] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.821615 [3] AppendEntries: {Term:2 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:01.821858 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.821900 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:01.822298 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.822467 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:01.854608 [0] becomes Dead
22:39:01.854720 [0] commitChanSender done
22:39:01.854749 [1] becomes Dead
22:39:01.854848 [1] commitChanSender done
22:39:01.854956 [2] becomes Dead
22:39:01.855051 [2] commitChanSender done
22:39:01.855086 [3] becomes Dead
22:39:01.855191 [3] commitChanSender done
22:39:01.855243 [4] becomes Dead
22:39:01.855505 [4] commitChanSender done
22:39:01.858834 [0] in election timer state=Dead, bailing out
22:39:01.860993 [2] in election timer state=Dead, bailing out
22:39:01.861365 [1] in election timer state=Dead, bailing out
22:39:01.864312 [3] in election timer state=Dead, bailing out
--- PASS: TestElectionLeaderDisconnectThenReconnect5 (0.83s)
=== RUN   TestElectionFollowerComesBack
22:39:01.911031 [0] listening at [::]:41547
22:39:01.911481 [1] listening at [::]:39609
22:39:01.911829 [2] listening at [::]:45939
22:39:01.915290 [1] election timer started (285ms), term=0
22:39:01.915308 [0] election timer started (165ms), term=0
22:39:01.915522 [2] election timer started (276ms), term=0
22:39:02.086495 [0] becomes Candidate (currentTerm=1); log=[]
22:39:02.086884 [0] election timer started (226ms), term=1
22:39:02.086909 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.086942 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.093255 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:02.093314 [1] ... term out of date in RequestVote
22:39:02.093335 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:02.093356 [1] becomes Follower with term=1; log=[]
22:39:02.093401 [2] ... term out of date in RequestVote
22:39:02.093488 [2] becomes Follower with term=1; log=[]
22:39:02.093823 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:02.093925 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:02.094035 [1] election timer started (178ms), term=1
22:39:02.094167 [2] election timer started (188ms), term=1
22:39:02.095231 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:02.095296 [0] wins election with 2 votes
22:39:02.095386 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:39:02.095505 [1] in election timer term changed from 0 to 1, bailing out
22:39:02.095532 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:02.095599 [0] while waiting for reply, state = Leader
22:39:02.095741 [2] in election timer term changed from 0 to 1, bailing out
22:39:02.095871 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.095934 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.097491 [0] in election timer state=Leader, bailing out
22:39:02.098698 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.099007 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.099607 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.102614 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.102876 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.103399 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.146419 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.146453 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.151411 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.151747 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.152119 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.152183 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.152425 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.152758 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.196497 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.196559 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.199066 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.199158 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.199337 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.199423 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.199641 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.199916 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.216565 [TEST] Disconnect 1
22:39:02.246634 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.246638 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.248328 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.248582 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.248979 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.297208 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.297217 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.300183 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.300496 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.300967 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.348236 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.348248 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.352409 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.352715 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.353217 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.385164 [1] becomes Candidate (currentTerm=2); log=[]
22:39:02.385606 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.385658 [1] election timer started (200ms), term=2
22:39:02.385687 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.399176 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.399268 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.401078 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.401383 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.401949 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.449463 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.449494 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.454369 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.454687 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.455108 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.499382 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.499407 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.503550 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.503909 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.504403 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.550026 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.550047 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.552971 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.553277 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.553759 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.585978 [1] becomes Candidate (currentTerm=3); log=[]
22:39:02.586378 [1] sending RequestVote to 0: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.586396 [1] sending RequestVote to 2: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.586417 [1] election timer started (296ms), term=3
22:39:02.600860 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.600879 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.605780 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.606156 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.607016 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.651057 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.651091 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.652928 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.653167 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.653563 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.701172 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.701181 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.702990 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.703309 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.703692 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.751898 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.751954 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.757001 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.757274 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.757754 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.802780 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.802842 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.808796 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.809085 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.809509 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.853248 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.853256 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.858171 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.858511 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.858975 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:02.867404 [TEST] Reconnect 1
22:39:02.887344 [1] becomes Candidate (currentTerm=4); log=[]
22:39:02.887834 [1] election timer started (259ms), term=4
22:39:02.887858 [1] sending RequestVote to 2: {Term:4 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.887958 [1] sending RequestVote to 0: {Term:4 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:02.890524 [0] RequestVote: {Term:4 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
22:39:02.890583 [0] ... term out of date in RequestVote
22:39:02.890621 [0] becomes Follower with term=4; log=[]
22:39:02.891072 [0] ... RequestVote reply: &{Term:4 VoteGranted:true}
22:39:02.891318 [0] election timer started (162ms), term=4
22:39:02.892277 [1] received RequestVoteReply {Term:4 VoteGranted:true}
22:39:02.892350 [1] wins election with 2 votes
22:39:02.892505 [1] becomes Leader; term=4, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:02.892936 [1] sending AppendEntries to 0: ni=0, args={Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.892993 [1] sending AppendEntries to 2: ni=0, args={Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.894353 [2] RequestVote: {Term:4 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
22:39:02.894412 [2] ... term out of date in RequestVote
22:39:02.894458 [2] becomes Follower with term=4; log=[]
22:39:02.894861 [2] ... RequestVote reply: &{Term:4 VoteGranted:true}
22:39:02.895019 [2] in election timer term changed from 1 to 4, bailing out
22:39:02.895175 [2] election timer started (178ms), term=4
22:39:02.895327 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.895786 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.896014 [1] received RequestVoteReply {Term:4 VoteGranted:true}
22:39:02.896073 [1] while waiting for reply, state = Leader
22:39:02.896431 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:02.897339 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.897608 [0] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.897973 [1] in election timer state=Leader, bailing out
22:39:02.898200 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:02.944058 [1] sending AppendEntries to 2: ni=0, args={Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.944064 [1] sending AppendEntries to 0: ni=0, args={Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.947822 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.948081 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.948474 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:02.950580 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.950809 [0] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:02.951126 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:02.994941 [1] sending AppendEntries to 2: ni=0, args={Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:02.994973 [1] sending AppendEntries to 0: ni=0, args={Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.000096 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.000515 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.000883 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.000959 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:03.001197 [0] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.001594 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:03.021315 [0] becomes Dead
22:39:03.021465 [0] in election timer state=Dead, bailing out
22:39:03.021478 [0] commitChanSender done
22:39:03.021563 [1] becomes Dead
22:39:03.021702 [1] commitChanSender done
22:39:03.021715 [2] becomes Dead
22:39:03.021844 [2] commitChanSender done
22:39:03.026051 [2] in election timer state=Dead, bailing out
--- PASS: TestElectionFollowerComesBack (1.17s)
=== RUN   TestElectionDisconnectLoop
22:39:03.079067 [0] listening at [::]:38295
22:39:03.079484 [1] listening at [::]:43559
22:39:03.079837 [2] listening at [::]:37513
22:39:03.083561 [1] election timer started (236ms), term=0
22:39:03.083662 [0] election timer started (282ms), term=0
22:39:03.083687 [2] election timer started (248ms), term=0
22:39:03.324537 [1] becomes Candidate (currentTerm=1); log=[]
22:39:03.324864 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.324884 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.324935 [1] election timer started (294ms), term=1
22:39:03.327558 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:03.327604 [2] ... term out of date in RequestVote
22:39:03.327647 [2] becomes Follower with term=1; log=[]
22:39:03.327992 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:03.328145 [2] election timer started (299ms), term=1
22:39:03.328389 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:03.328436 [0] ... term out of date in RequestVote
22:39:03.328465 [0] becomes Follower with term=1; log=[]
22:39:03.328761 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:03.328848 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:03.328934 [1] wins election with 2 votes
22:39:03.328949 [0] election timer started (277ms), term=1
22:39:03.329041 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:03.329496 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.329521 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.329882 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:03.329961 [1] while waiting for reply, state = Leader
22:39:03.334364 [2] in election timer term changed from 0 to 1, bailing out
22:39:03.334466 [0] in election timer term changed from 0 to 1, bailing out
22:39:03.334647 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.334973 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.335319 [1] in election timer state=Leader, bailing out
22:39:03.335538 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:03.335676 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.335937 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.336537 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:03.380052 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.380102 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.385024 [TEST] Disconnect 1
22:39:03.385516 [TEST] Disconnect 2
22:39:03.385704 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.385751 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.386071 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.386072 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.430826 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.430838 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.481572 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.481575 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.531668 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.531735 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.581769 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.581808 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.632391 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.632452 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.669322 [0] becomes Candidate (currentTerm=2); log=[]
22:39:03.669712 [0] election timer started (279ms), term=2
22:39:03.669735 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.669841 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.683279 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.683313 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.689354 [2] becomes Candidate (currentTerm=2); log=[]
22:39:03.689960 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.689972 [2] election timer started (232ms), term=2
22:39:03.690047 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.696639 [TEST] Reconnect 2
22:39:03.699927 [TEST] Reconnect 1
22:39:03.734270 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.734301 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.740505 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.740506 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.740883 [0] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:03.740990 [2] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:03.741662 [1] term out of date in heartbeat reply
22:39:03.741725 [1] becomes Follower with term=2; log=[]
22:39:03.741862 [1] term out of date in heartbeat reply
22:39:03.741922 [1] becomes Follower with term=2; log=[]
22:39:03.742064 [1] election timer started (289ms), term=2
22:39:03.742081 [1] election timer started (217ms), term=2
22:39:03.930776 [2] becomes Candidate (currentTerm=3); log=[]
22:39:03.931241 [2] sending RequestVote to 1: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.931244 [2] election timer started (183ms), term=3
22:39:03.931270 [2] sending RequestVote to 0: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:03.934362 [0] RequestVote: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=0, log index/term=(-1, -1)]
22:39:03.934418 [0] ... term out of date in RequestVote
22:39:03.934464 [0] becomes Follower with term=3; log=[]
22:39:03.934879 [0] ... RequestVote reply: &{Term:3 VoteGranted:true}
22:39:03.935123 [0] election timer started (204ms), term=3
22:39:03.935850 [2] received RequestVoteReply {Term:3 VoteGranted:true}
22:39:03.935917 [2] wins election with 2 votes
22:39:03.936024 [2] becomes Leader; term=3, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:39:03.936479 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.936541 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.938668 [1] RequestVote: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=-1, log index/term=(-1, -1)]
22:39:03.938729 [1] ... term out of date in RequestVote
22:39:03.938788 [1] becomes Follower with term=3; log=[]
22:39:03.939136 [1] ... RequestVote reply: &{Term:3 VoteGranted:true}
22:39:03.939265 [1] election timer started (237ms), term=3
22:39:03.940036 [2] received RequestVoteReply {Term:3 VoteGranted:true}
22:39:03.940089 [2] while waiting for reply, state = Leader
22:39:03.940115 [0] in election timer term changed from 2 to 3, bailing out
22:39:03.940742 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.941073 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.941626 [2] in election timer state=Leader, bailing out
22:39:03.941786 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:03.942571 [1] in election timer term changed from 2 to 3, bailing out
22:39:03.942694 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.942713 [1] in election timer term changed from 2 to 3, bailing out
22:39:03.942987 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.943519 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:03.987135 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.987135 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.992247 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.992323 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:03.992514 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.992589 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:03.992929 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:03.993077 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:04.002583 [TEST] Disconnect 2
22:39:04.003082 [TEST] Disconnect 0
22:39:04.037465 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.037532 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.088486 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.088490 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.139519 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.139526 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.190180 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.190190 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.205702 [0] becomes Candidate (currentTerm=4); log=[]
22:39:04.206127 [0] election timer started (291ms), term=4
22:39:04.206143 [0] sending RequestVote to 2: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.206143 [0] sending RequestVote to 1: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.229842 [1] becomes Candidate (currentTerm=4); log=[]
22:39:04.230335 [1] sending RequestVote to 0: {Term:4 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.230370 [1] election timer started (219ms), term=4
22:39:04.230396 [1] sending RequestVote to 2: {Term:4 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.240814 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.240943 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.291311 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.291355 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.314366 [TEST] Reconnect 0
22:39:04.316789 [TEST] Reconnect 2
22:39:04.342214 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.342214 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.346000 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.346251 [0] AppendEntries reply: {Term:4 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:04.346961 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.347535 [1] AppendEntries reply: {Term:4 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:04.347875 [2] term out of date in heartbeat reply
22:39:04.348007 [2] becomes Follower with term=4; log=[]
22:39:04.348409 [2] election timer started (215ms), term=4
22:39:04.348890 [2] term out of date in heartbeat reply
22:39:04.348993 [2] becomes Follower with term=4; log=[]
22:39:04.349174 [2] election timer started (251ms), term=4
22:39:04.451120 [1] becomes Candidate (currentTerm=5); log=[]
22:39:04.451834 [1] sending RequestVote to 0: {Term:5 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.451877 [1] sending RequestVote to 2: {Term:5 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.451903 [1] election timer started (150ms), term=5
22:39:04.454721 [2] RequestVote: {Term:5 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=4, votedFor=-1, log index/term=(-1, -1)]
22:39:04.454827 [2] ... term out of date in RequestVote
22:39:04.454882 [2] becomes Follower with term=5; log=[]
22:39:04.455348 [2] ... RequestVote reply: &{Term:5 VoteGranted:true}
22:39:04.455581 [2] election timer started (294ms), term=5
22:39:04.456418 [1] received RequestVoteReply {Term:5 VoteGranted:true}
22:39:04.456474 [1] wins election with 2 votes
22:39:04.456604 [1] becomes Leader; term=5, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:04.457073 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.457102 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.458726 [0] RequestVote: {Term:5 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=4, votedFor=0, log index/term=(-1, -1)]
22:39:04.458745 [2] in election timer term changed from 4 to 5, bailing out
22:39:04.458784 [0] ... term out of date in RequestVote
22:39:04.458872 [0] becomes Follower with term=5; log=[]
22:39:04.459189 [0] ... RequestVote reply: &{Term:5 VoteGranted:true}
22:39:04.459297 [2] in election timer term changed from 4 to 5, bailing out
22:39:04.459407 [0] election timer started (241ms), term=5
22:39:04.460034 [1] received RequestVoteReply {Term:5 VoteGranted:true}
22:39:04.460083 [1] while waiting for reply, state = Leader
22:39:04.462831 [0] AppendEntries: {Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.462889 [1] in election timer state=Leader, bailing out
22:39:04.462917 [2] AppendEntries: {Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.463087 [0] AppendEntries reply: {Term:5 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:04.463317 [2] AppendEntries reply: {Term:5 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:04.464067 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:04.464505 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:04.466385 [0] in election timer term changed from 4 to 5, bailing out
22:39:04.468594 [TEST] Disconnect 1
22:39:04.469062 [TEST] Disconnect 2
22:39:04.507607 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.507607 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.558334 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.558410 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.609459 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.609538 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.659997 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.660023 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.710186 [0] becomes Candidate (currentTerm=6); log=[]
22:39:04.710353 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.710398 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.710624 [0] sending RequestVote to 1: {Term:6 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.710632 [0] election timer started (192ms), term=6
22:39:04.710748 [0] sending RequestVote to 2: {Term:6 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.760971 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.761010 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.766142 [2] becomes Candidate (currentTerm=6); log=[]
22:39:04.766607 [2] election timer started (222ms), term=6
22:39:04.766607 [2] sending RequestVote to 0: {Term:6 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.766607 [2] sending RequestVote to 1: {Term:6 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.779720 [TEST] Reconnect 2
22:39:04.782245 [TEST] Reconnect 1
22:39:04.811720 [1] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.811757 [1] sending AppendEntries to 2: ni=0, args={Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.819023 [2] AppendEntries: {Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.819085 [0] AppendEntries: {Term:5 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.819516 [2] AppendEntries reply: {Term:6 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:04.819609 [0] AppendEntries reply: {Term:6 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:04.820713 [1] term out of date in heartbeat reply
22:39:04.820782 [1] becomes Follower with term=6; log=[]
22:39:04.820969 [1] term out of date in heartbeat reply
22:39:04.821043 [1] becomes Follower with term=6; log=[]
22:39:04.821282 [1] election timer started (181ms), term=6
22:39:04.821313 [1] election timer started (165ms), term=6
22:39:04.911113 [0] becomes Candidate (currentTerm=7); log=[]
22:39:04.911655 [0] sending RequestVote to 1: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.911675 [0] sending RequestVote to 2: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:04.911662 [0] election timer started (177ms), term=7
22:39:04.916350 [1] RequestVote: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=6, votedFor=-1, log index/term=(-1, -1)]
22:39:04.916395 [1] ... term out of date in RequestVote
22:39:04.916432 [1] becomes Follower with term=7; log=[]
22:39:04.916767 [1] ... RequestVote reply: &{Term:7 VoteGranted:true}
22:39:04.916977 [1] election timer started (257ms), term=7
22:39:04.917139 [2] RequestVote: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=6, votedFor=2, log index/term=(-1, -1)]
22:39:04.917192 [2] ... term out of date in RequestVote
22:39:04.917232 [2] becomes Follower with term=7; log=[]
22:39:04.917522 [2] ... RequestVote reply: &{Term:7 VoteGranted:true}
22:39:04.917704 [2] election timer started (252ms), term=7
22:39:04.917754 [0] received RequestVoteReply {Term:7 VoteGranted:true}
22:39:04.917834 [0] wins election with 2 votes
22:39:04.917963 [0] becomes Leader; term=7, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:39:04.918388 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.918389 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.918395 [0] received RequestVoteReply {Term:7 VoteGranted:true}
22:39:04.918558 [0] while waiting for reply, state = Leader
22:39:04.920570 [2] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.920882 [2] AppendEntries reply: {Term:7 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:04.921420 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:04.921518 [1] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.921800 [1] AppendEntries reply: {Term:7 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:04.921954 [1] in election timer term changed from 6 to 7, bailing out
22:39:04.921962 [0] in election timer state=Leader, bailing out
22:39:04.922063 [1] in election timer term changed from 6 to 7, bailing out
22:39:04.922378 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:04.927490 [2] in election timer term changed from 6 to 7, bailing out
22:39:04.933853 [TEST] Disconnect 0
22:39:04.934366 [TEST] Disconnect 1
22:39:04.969206 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:04.969222 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.019832 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.019900 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.070783 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.070964 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.121973 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.121996 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.173166 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.173175 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.178295 [2] becomes Candidate (currentTerm=8); log=[]
22:39:05.178743 [2] sending RequestVote to 1: {Term:8 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.178768 [2] sending RequestVote to 0: {Term:8 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.178763 [2] election timer started (293ms), term=8
22:39:05.187431 [1] becomes Candidate (currentTerm=8); log=[]
22:39:05.187911 [1] sending RequestVote to 2: {Term:8 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.187955 [1] election timer started (291ms), term=8
22:39:05.187997 [1] sending RequestVote to 0: {Term:8 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.224147 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.224167 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.245667 [TEST] Reconnect 1
22:39:05.247838 [TEST] Reconnect 0
22:39:05.274955 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.274988 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.281081 [2] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.281460 [2] AppendEntries reply: {Term:8 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:05.282667 [0] term out of date in heartbeat reply
22:39:05.282724 [0] becomes Follower with term=8; log=[]
22:39:05.282999 [1] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.283036 [0] election timer started (153ms), term=8
22:39:05.283427 [1] AppendEntries reply: {Term:8 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:05.284737 [0] term out of date in heartbeat reply
22:39:05.284828 [0] becomes Follower with term=8; log=[]
22:39:05.285029 [0] election timer started (299ms), term=8
22:39:05.443359 [0] becomes Candidate (currentTerm=9); log=[]
22:39:05.443763 [0] election timer started (239ms), term=9
22:39:05.443780 [0] sending RequestVote to 1: {Term:9 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.443885 [0] sending RequestVote to 2: {Term:9 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.445356 [0] in election timer term changed from 8 to 9, bailing out
22:39:05.447861 [2] RequestVote: {Term:9 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=8, votedFor=2, log index/term=(-1, -1)]
22:39:05.447938 [2] ... term out of date in RequestVote
22:39:05.447990 [1] RequestVote: {Term:9 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=8, votedFor=1, log index/term=(-1, -1)]
22:39:05.448096 [1] ... term out of date in RequestVote
22:39:05.448023 [2] becomes Follower with term=9; log=[]
22:39:05.448198 [1] becomes Follower with term=9; log=[]
22:39:05.448657 [1] ... RequestVote reply: &{Term:9 VoteGranted:true}
22:39:05.448690 [2] ... RequestVote reply: &{Term:9 VoteGranted:true}
22:39:05.448780 [1] in election timer term changed from 8 to 9, bailing out
22:39:05.448865 [2] election timer started (167ms), term=9
22:39:05.448966 [1] election timer started (252ms), term=9
22:39:05.449017 [2] in election timer term changed from 8 to 9, bailing out
22:39:05.449273 [0] received RequestVoteReply {Term:9 VoteGranted:true}
22:39:05.449332 [0] wins election with 2 votes
22:39:05.449457 [0] becomes Leader; term=9, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:39:05.449643 [0] received RequestVoteReply {Term:9 VoteGranted:true}
22:39:05.449706 [0] while waiting for reply, state = Leader
22:39:05.450023 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.450052 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.452752 [2] AppendEntries: {Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.453075 [2] AppendEntries reply: {Term:9 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.453519 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:05.454492 [0] in election timer state=Leader, bailing out
22:39:05.455832 [1] AppendEntries: {Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.456167 [1] AppendEntries reply: {Term:9 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.456597 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:05.501223 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.501280 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.502905 [1] AppendEntries: {Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.503220 [1] AppendEntries reply: {Term:9 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.503565 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:05.504644 [2] AppendEntries: {Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.504935 [2] AppendEntries reply: {Term:9 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.505286 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:05.550316 [TEST] Disconnect 0
22:39:05.551116 [TEST] Disconnect 1
22:39:05.551374 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.551502 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.601987 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.602026 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.652984 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.652997 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.679641 [2] becomes Candidate (currentTerm=10); log=[]
22:39:05.680017 [2] sending RequestVote to 0: {Term:10 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.680082 [2] election timer started (225ms), term=10
22:39:05.680104 [2] sending RequestVote to 1: {Term:10 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.703524 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.703552 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.753729 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.753744 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.759839 [1] becomes Candidate (currentTerm=10); log=[]
22:39:05.760240 [1] election timer started (232ms), term=10
22:39:05.760260 [1] sending RequestVote to 0: {Term:10 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.760244 [1] sending RequestVote to 2: {Term:10 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.804640 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.804653 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.855029 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.855043 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.862192 [TEST] Reconnect 1
22:39:05.864486 [TEST] Reconnect 0
22:39:05.905747 [0] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.906071 [0] sending AppendEntries to 1: ni=0, args={Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.908189 [1] AppendEntries: {Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.908368 [1] AppendEntries reply: {Term:10 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:05.909725 [0] term out of date in heartbeat reply
22:39:05.909801 [0] becomes Follower with term=10; log=[]
22:39:05.910057 [0] election timer started (160ms), term=10
22:39:05.910947 [2] becomes Candidate (currentTerm=11); log=[]
22:39:05.911481 [2] election timer started (293ms), term=11
22:39:05.911623 [2] AppendEntries: {Term:9 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.911977 [2] AppendEntries reply: {Term:11 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:05.912164 [2] sending RequestVote to 0: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.912332 [2] sending RequestVote to 1: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:05.913177 [0] term out of date in heartbeat reply
22:39:05.913253 [0] becomes Follower with term=11; log=[]
22:39:05.913614 [0] election timer started (293ms), term=11
22:39:05.916010 [0] RequestVote: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=11, votedFor=-1, log index/term=(-1, -1)]
22:39:05.916318 [0] ... RequestVote reply: &{Term:11 VoteGranted:true}
22:39:05.917255 [2] received RequestVoteReply {Term:11 VoteGranted:true}
22:39:05.917322 [2] wins election with 2 votes
22:39:05.917433 [2] becomes Leader; term=11, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:39:05.917891 [2] sending AppendEntries to 0: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.917974 [1] RequestVote: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=10, votedFor=1, log index/term=(-1, -1)]
22:39:05.918015 [2] sending AppendEntries to 1: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.918054 [1] ... term out of date in RequestVote
22:39:05.918263 [1] becomes Follower with term=11; log=[]
22:39:05.918688 [1] ... RequestVote reply: &{Term:11 VoteGranted:true}
22:39:05.918924 [1] election timer started (163ms), term=11
22:39:05.919781 [2] received RequestVoteReply {Term:11 VoteGranted:true}
22:39:05.919877 [2] while waiting for reply, state = Leader
22:39:05.920251 [0] in election timer term changed from 10 to 11, bailing out
22:39:05.920365 [1] in election timer term changed from 10 to 11, bailing out
22:39:05.922458 [2] in election timer state=Leader, bailing out
22:39:05.924781 [0] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.924785 [1] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.925218 [0] AppendEntries reply: {Term:11 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.925236 [1] AppendEntries reply: {Term:11 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.925880 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:05.926015 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:05.968649 [2] sending AppendEntries to 0: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.968682 [2] sending AppendEntries to 1: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.972373 [1] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.972467 [0] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:05.972639 [1] AppendEntries reply: {Term:11 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.972782 [0] AppendEntries reply: {Term:11 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:05.973008 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:05.973154 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.017422 [0] becomes Dead
22:39:06.017531 [0] commitChanSender done
22:39:06.017635 [1] becomes Dead
22:39:06.017765 [1] commitChanSender done
22:39:06.017798 [2] becomes Dead
22:39:06.017895 [2] commitChanSender done
22:39:06.019617 [1] in election timer state=Dead, bailing out
22:39:06.024804 [0] in election timer state=Dead, bailing out
--- PASS: TestElectionDisconnectLoop (3.00s)
=== RUN   TestCommitOneCommand
22:39:06.075057 [0] listening at [::]:44461
22:39:06.075789 [1] listening at [::]:46421
22:39:06.076197 [2] listening at [::]:44503
22:39:06.079662 [1] election timer started (192ms), term=0
22:39:06.079715 [2] election timer started (178ms), term=0
22:39:06.079736 [0] election timer started (292ms), term=0
22:39:06.260447 [2] becomes Candidate (currentTerm=1); log=[]
22:39:06.260799 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:06.260860 [2] election timer started (251ms), term=1
22:39:06.261006 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:06.263155 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:06.263188 [0] ... term out of date in RequestVote
22:39:06.263240 [0] becomes Follower with term=1; log=[]
22:39:06.263555 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:06.263697 [0] election timer started (198ms), term=1
22:39:06.264262 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:06.264327 [2] wins election with 2 votes
22:39:06.264397 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:39:06.264654 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.264770 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.266406 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:06.266450 [1] ... term out of date in RequestVote
22:39:06.266488 [1] becomes Follower with term=1; log=[]
22:39:06.266812 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:06.266990 [1] election timer started (243ms), term=1
22:39:06.267551 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:06.267611 [2] while waiting for reply, state = Leader
22:39:06.267720 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.267930 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.268330 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.270489 [1] in election timer term changed from 0 to 1, bailing out
22:39:06.270569 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.270956 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.271067 [2] in election timer state=Leader, bailing out
22:39:06.271070 [0] in election timer term changed from 0 to 1, bailing out
22:39:06.271495 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.315308 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.315373 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.317872 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.318111 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.318511 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.320598 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.320818 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.321114 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.366332 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.366338 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.368930 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.369170 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.369486 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.372710 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.372969 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.373296 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.380980 [TEST] submitting 42 to 2
22:39:06.381037 [2] Submit received by Leader: 42
22:39:06.381313 [2] ... log=[{42 1}]
22:39:06.381566 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:06.381608 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:06.383274 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:06.383300 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:06.383340 [0] ... inserting entries [{42 1}] from index 0
22:39:06.383386 [1] ... inserting entries [{42 1}] from index 0
22:39:06.383464 [1] ... log is now: [{42 1}]
22:39:06.383389 [0] ... log is now: [{42 1}]
22:39:06.383763 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.383779 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.384133 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:1], matchIndex := map[0:-1 1:0]; commitIndex := 0
22:39:06.384169 [2] leader sets commitIndex := 0
22:39:06.384288 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.384409 [2] commitChanSender entries=[{42 1}], savedLastApplied=-1
22:39:06.384524 [TEST] collectCommits(2) got {Command:42 Index:0 Term:1}
22:39:06.384581 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.384678 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.388456 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.388506 [1] ... setting commitIndex=0
22:39:06.388772 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.388975 [1] commitChanSender entries=[{42 1}], savedLastApplied=-1
22:39:06.389058 [TEST] collectCommits(1) got {Command:42 Index:0 Term:1}
22:39:06.389109 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.389118 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.389171 [0] ... setting commitIndex=0
22:39:06.389574 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.389732 [0] commitChanSender entries=[{42 1}], savedLastApplied=-1
22:39:06.389831 [TEST] collectCommits(0) got {Command:42 Index:0 Term:1}
22:39:06.389929 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.434921 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.434964 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.437989 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.438013 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.438466 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.438507 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.439081 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.439307 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.485166 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.485190 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.488808 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.489136 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.489523 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.491637 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.491934 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.492253 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.535970 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.535979 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.539954 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.540252 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.540598 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.540764 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.541081 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.541419 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.586208 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.586249 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.590923 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.591247 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.591624 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.591782 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:06.592063 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.592411 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := 0
22:39:06.632594 [0] becomes Dead
22:39:06.632671 [0] commitChanSender done
22:39:06.632729 [1] becomes Dead
22:39:06.632838 [2] becomes Dead
22:39:06.632841 [1] commitChanSender done
22:39:06.632981 [2] commitChanSender done
22:39:06.634796 [0] in election timer state=Dead, bailing out
22:39:06.637078 [1] in election timer state=Dead, bailing out
--- PASS: TestCommitOneCommand (0.61s)
=== RUN   TestSubmitNonLeaderFails
22:39:06.687346 [0] listening at [::]:45357
22:39:06.687786 [1] listening at [::]:38007
22:39:06.688158 [2] listening at [::]:37673
22:39:06.691601 [1] election timer started (252ms), term=0
22:39:06.691625 [0] election timer started (288ms), term=0
22:39:06.691600 [2] election timer started (192ms), term=0
22:39:06.892206 [2] becomes Candidate (currentTerm=1); log=[]
22:39:06.892872 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:06.892886 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:06.893349 [2] election timer started (205ms), term=1
22:39:06.896881 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:06.896953 [1] ... term out of date in RequestVote
22:39:06.897009 [1] becomes Follower with term=1; log=[]
22:39:06.897480 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:06.897618 [1] election timer started (162ms), term=1
22:39:06.898455 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:06.898493 [2] wins election with 2 votes
22:39:06.898576 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:39:06.898754 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:06.898786 [0] ... term out of date in RequestVote
22:39:06.898812 [0] becomes Follower with term=1; log=[]
22:39:06.899177 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:06.899195 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.899215 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.899538 [0] election timer started (278ms), term=1
22:39:06.900826 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:06.900886 [2] while waiting for reply, state = Leader
22:39:06.902545 [0] in election timer term changed from 0 to 1, bailing out
22:39:06.902623 [1] in election timer term changed from 0 to 1, bailing out
22:39:06.903669 [2] in election timer state=Leader, bailing out
22:39:06.905986 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.906043 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.906425 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.906481 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.907237 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.907439 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.950680 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.950739 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.952659 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.953013 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.953534 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.953547 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:06.954115 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:06.954656 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:06.993777 [TEST] submitting 42 to 0
22:39:06.993873 [0] Submit received by Follower: 42
22:39:07.000687 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.000767 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.005404 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.005413 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.005777 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.005932 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.006113 [0] becomes Dead
22:39:07.006315 [0] commitChanSender done
22:39:07.006328 [1] becomes Dead
22:39:07.006455 [1] commitChanSender done
22:39:07.006484 [2] becomes Dead
22:39:07.006587 [2] commitChanSender done
--- PASS: TestSubmitNonLeaderFails (0.32s)
=== RUN   TestCommitMultipleCommands
22:39:07.008917 [1] in election timer state=Dead, bailing out
22:39:07.010016 [0] in election timer state=Dead, bailing out
22:39:07.010145 [0] listening at [::]:40299
22:39:07.010669 [1] listening at [::]:45267
22:39:07.011112 [2] listening at [::]:45681
22:39:07.015636 [1] election timer started (195ms), term=0
22:39:07.015702 [0] election timer started (260ms), term=0
22:39:07.015644 [2] election timer started (269ms), term=0
22:39:07.216672 [1] becomes Candidate (currentTerm=1); log=[]
22:39:07.217045 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:07.217111 [1] election timer started (270ms), term=1
22:39:07.217130 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:07.220932 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:07.220973 [0] ... term out of date in RequestVote
22:39:07.221010 [0] becomes Follower with term=1; log=[]
22:39:07.221387 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:07.221644 [0] election timer started (248ms), term=1
22:39:07.222196 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:07.222254 [1] wins election with 2 votes
22:39:07.222343 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:07.222639 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:07.222709 [2] ... term out of date in RequestVote
22:39:07.222738 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.222753 [2] becomes Follower with term=1; log=[]
22:39:07.222806 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.223191 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:07.223305 [2] election timer started (192ms), term=1
22:39:07.224119 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:07.224183 [1] while waiting for reply, state = Leader
22:39:07.225910 [2] in election timer term changed from 0 to 1, bailing out
22:39:07.225919 [0] in election timer term changed from 0 to 1, bailing out
22:39:07.228279 [1] in election timer state=Leader, bailing out
22:39:07.228280 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.228411 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.228630 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.228747 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.229179 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:07.229445 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:07.272986 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.273066 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.276689 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.276953 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.277293 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:07.279427 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:07.279671 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.280035 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:07.317398 [TEST] submitting 42 to 1
22:39:07.317478 [1] Submit received by Leader: 42
22:39:07.317837 [1] ... log=[{42 1}]
22:39:07.318125 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:07.318210 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:07.321795 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:07.321878 [2] ... inserting entries [{42 1}] from index 0
22:39:07.321925 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
22:39:07.321936 [2] ... log is now: [{42 1}]
22:39:07.322029 [0] ... inserting entries [{42 1}] from index 0
22:39:07.322099 [0] ... log is now: [{42 1}]
22:39:07.322287 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.322420 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.322668 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:1], matchIndex := map[0:-1 2:0]; commitIndex := 0
22:39:07.322733 [1] leader sets commitIndex := 0
22:39:07.322932 [1] commitChanSender entries=[{42 1}], savedLastApplied=-1
22:39:07.322952 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:07.323062 [TEST] collectCommits(1) got {Command:42 Index:0 Term:1}
22:39:07.323186 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.323195 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.325731 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.325773 [0] ... setting commitIndex=0
22:39:07.326052 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.326349 [0] commitChanSender entries=[{42 1}], savedLastApplied=-1
22:39:07.326455 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:07.326457 [TEST] collectCommits(0) got {Command:42 Index:0 Term:1}
22:39:07.328505 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.328570 [2] ... setting commitIndex=0
22:39:07.328844 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.329123 [2] commitChanSender entries=[{42 1}], savedLastApplied=-1
22:39:07.329242 [TEST] collectCommits(2) got {Command:42 Index:0 Term:1}
22:39:07.329247 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:07.373167 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.373179 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.375989 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.376301 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.376642 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:07.378818 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:07.379136 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.379517 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:07.418002 [TEST] submitting 55 to 1
22:39:07.418098 [1] Submit received by Leader: 55
22:39:07.418429 [1] ... log=[{42 1} {55 1}]
22:39:07.418764 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
22:39:07.418839 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
22:39:07.421678 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
22:39:07.421769 [2] ... inserting entries [{55 1}] from index 1
22:39:07.421845 [2] ... log is now: [{42 1} {55 1}]
22:39:07.422286 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.422636 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
22:39:07.422702 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:2], matchIndex := map[0:0 2:1]; commitIndex := 1
22:39:07.422779 [1] leader sets commitIndex := 1
22:39:07.422725 [0] ... inserting entries [{55 1}] from index 1
22:39:07.422939 [1] commitChanSender entries=[{55 1}], savedLastApplied=0
22:39:07.422984 [0] ... log is now: [{42 1} {55 1}]
22:39:07.423042 [TEST] collectCommits(1) got {Command:55 Index:1 Term:1}
22:39:07.423170 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:07.423176 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:1}
22:39:07.423420 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.423773 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:07.425073 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:1}
22:39:07.425121 [0] ... setting commitIndex=1
22:39:07.425441 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.425572 [0] commitChanSender entries=[{55 1}], savedLastApplied=0
22:39:07.425666 [TEST] collectCommits(0) got {Command:55 Index:1 Term:1}
22:39:07.425808 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:07.427891 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:07.427942 [2] ... setting commitIndex=1
22:39:07.428255 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.428432 [2] commitChanSender entries=[{55 1}], savedLastApplied=0
22:39:07.428523 [TEST] collectCommits(2) got {Command:55 Index:1 Term:1}
22:39:07.428636 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:07.473916 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:07.474121 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:07.478023 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:07.478405 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.478795 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:07.479812 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:07.480129 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.480490 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:07.519013 [TEST] submitting 81 to 1
22:39:07.519103 [1] Submit received by Leader: 81
22:39:07.519663 [1] ... log=[{42 1} {55 1} {81 1}]
22:39:07.520119 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
22:39:07.520136 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
22:39:07.523825 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
22:39:07.523886 [2] ... inserting entries [{81 1}] from index 2
22:39:07.523946 [2] ... log is now: [{42 1} {55 1} {81 1}]
22:39:07.524272 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.524620 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:3], matchIndex := map[0:1 2:2]; commitIndex := 2
22:39:07.524685 [1] leader sets commitIndex := 2
22:39:07.524834 [1] commitChanSender entries=[{81 1}], savedLastApplied=1
22:39:07.524954 [TEST] collectCommits(1) got {Command:81 Index:2 Term:1}
22:39:07.525023 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:2}
22:39:07.525068 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.526506 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
22:39:07.526570 [0] ... inserting entries [{81 1}] from index 2
22:39:07.526652 [0] ... log is now: [{42 1} {55 1} {81 1}]
22:39:07.527042 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.527423 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.529583 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.529640 [2] ... setting commitIndex=2
22:39:07.529714 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:2}
22:39:07.529793 [0] ... setting commitIndex=2
22:39:07.530001 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.530118 [2] commitChanSender entries=[{81 1}], savedLastApplied=1
22:39:07.530221 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.530251 [TEST] collectCommits(2) got {Command:81 Index:2 Term:1}
22:39:07.530419 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.530475 [0] commitChanSender entries=[{81 1}], savedLastApplied=1
22:39:07.530568 [TEST] collectCommits(0) got {Command:81 Index:2 Term:1}
22:39:07.530647 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.575838 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.575854 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.581087 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.581161 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.581458 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.581513 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.581861 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.581981 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.625696 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.625703 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.631619 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.631717 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.631986 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.632075 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.632373 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.632522 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.675715 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.675735 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.677439 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.677776 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.678191 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.681647 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.682011 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.682355 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.725802 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.725834 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.728635 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.729197 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.729596 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.730647 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.731183 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.731549 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.776773 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.776793 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.778718 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.779101 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.779558 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.781907 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.782313 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.782702 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.827839 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.827860 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.830829 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.831194 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.831484 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:07.831606 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.831836 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:07.832223 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:07.870595 [0] becomes Dead
22:39:07.870693 [0] commitChanSender done
22:39:07.870778 [1] becomes Dead
22:39:07.870869 [1] commitChanSender done
22:39:07.870902 [2] becomes Dead
22:39:07.871026 [2] commitChanSender done
22:39:07.872900 [0] in election timer state=Dead, bailing out
22:39:07.873949 [2] in election timer state=Dead, bailing out
--- PASS: TestCommitMultipleCommands (0.92s)
=== RUN   TestCommitWithDisconnectionAndRecover
22:39:07.926629 [0] listening at [::]:39487
22:39:07.927087 [1] listening at [::]:36335
22:39:07.927509 [2] listening at [::]:34675
22:39:07.930994 [2] election timer started (176ms), term=0
22:39:07.931011 [1] election timer started (163ms), term=0
22:39:07.931135 [0] election timer started (282ms), term=0
22:39:08.102172 [1] becomes Candidate (currentTerm=1); log=[]
22:39:08.102558 [1] election timer started (235ms), term=1
22:39:08.102617 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:08.102683 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:08.106144 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:08.106209 [0] ... term out of date in RequestVote
22:39:08.106249 [0] becomes Follower with term=1; log=[]
22:39:08.106688 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:08.106876 [0] election timer started (175ms), term=1
22:39:08.107812 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:08.107871 [1] wins election with 2 votes
22:39:08.107950 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:08.107984 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:08.108028 [2] ... term out of date in RequestVote
22:39:08.108107 [2] becomes Follower with term=1; log=[]
22:39:08.108447 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.108485 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:08.108455 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.108713 [2] election timer started (217ms), term=1
22:39:08.109420 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:08.109476 [1] while waiting for reply, state = Leader
22:39:08.111195 [2] in election timer term changed from 0 to 1, bailing out
22:39:08.111312 [0] in election timer term changed from 0 to 1, bailing out
22:39:08.113424 [1] in election timer state=Leader, bailing out
22:39:08.113579 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.113849 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.114324 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:08.115361 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.115610 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.116028 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:08.159003 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.159060 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.161575 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.161829 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.162220 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:08.164350 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.164585 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.164899 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:08.209856 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.209908 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.213683 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.213768 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:08.213979 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.214116 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.214392 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:08.214544 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:08.232238 [1] Submit received by Leader: 5
22:39:08.232667 [1] ... log=[{5 1}]
22:39:08.232747 [1] Submit received by Leader: 6
22:39:08.233086 [1] ... log=[{5 1} {6 1}]
22:39:08.233428 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.233529 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.233699 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.233703 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.235359 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.235457 [0] ... inserting entries [{5 1} {6 1}] from index 0
22:39:08.235503 [0] ... log is now: [{5 1} {6 1}]
22:39:08.235775 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.236032 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.236099 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:0], matchIndex := map[0:1 2:-1]; commitIndex := 1
22:39:08.236156 [1] leader sets commitIndex := 1
22:39:08.236310 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.236347 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:08.236463 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:08.236507 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.236565 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:08.236587 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:1}
22:39:08.236762 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:0], matchIndex := map[0:1 2:-1]; commitIndex := 1
22:39:08.238109 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.238172 [2] ... inserting entries [{5 1} {6 1}] from index 0
22:39:08.238214 [2] ... log is now: [{5 1} {6 1}]
22:39:08.238458 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.238690 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:08.238721 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.238950 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.239243 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.240321 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:1}
22:39:08.240376 [2] ... setting commitIndex=1
22:39:08.240727 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.240960 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:08.241073 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.241133 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.241084 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:08.241313 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:08.241220 [0] ... setting commitIndex=1
22:39:08.241693 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.241903 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:08.242025 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:08.242083 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.242096 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:08.287468 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.287500 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.293770 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.293819 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.294088 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.294115 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.294395 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.294516 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.338113 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.338134 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.342026 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.342371 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.342732 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.343861 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.344185 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.344533 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.388494 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.388564 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.391055 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.391386 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.391658 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.391753 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.391987 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.392392 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.438563 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.438611 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.441394 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.441913 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.442475 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.443467 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.443902 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.444346 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.483782 [TEST] Disconnect 2
22:39:08.489195 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.489275 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.495191 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.495633 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.496041 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.539938 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.539983 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.545883 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.546224 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.546663 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.590355 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.590552 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.595404 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.595803 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.596213 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.641322 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.641626 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.645596 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.646147 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.646671 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.659863 [2] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
22:39:08.660520 [2] election timer started (243ms), term=2
22:39:08.660548 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:08.660698 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:08.691946 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.691976 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.696784 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:08.697388 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.697872 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:08.734517 [1] Submit received by Leader: 7
22:39:08.734906 [1] ... log=[{5 1} {6 1} {7 1}]
22:39:08.735191 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:08.735234 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:08.740396 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:08.740463 [0] ... inserting entries [{7 1}] from index 2
22:39:08.740529 [0] ... log is now: [{5 1} {6 1} {7 1}]
22:39:08.740818 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.741160 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:1]; commitIndex := 2
22:39:08.741211 [1] leader sets commitIndex := 2
22:39:08.741330 [1] commitChanSender entries=[{7 1}], savedLastApplied=1
22:39:08.741407 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
22:39:08.741652 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.741678 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:08.746347 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.746393 [0] ... setting commitIndex=2
22:39:08.746720 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.746840 [0] commitChanSender entries=[{7 1}], savedLastApplied=1
22:39:08.746961 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
22:39:08.747093 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:1]; commitIndex := 2
22:39:08.791760 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.791780 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:08.795753 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.796127 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.796538 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:1]; commitIndex := 2
22:39:08.842205 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:08.842217 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.847369 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.847794 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.848234 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:1]; commitIndex := 2
22:39:08.892735 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.892739 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:08.898925 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.899483 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.900101 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:1]; commitIndex := 2
22:39:08.911482 [2] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
22:39:08.912023 [2] sending RequestVote to 0: {Term:3 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:08.912047 [2] election timer started (182ms), term=3
22:39:08.912101 [2] sending RequestVote to 1: {Term:3 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:08.942934 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.942939 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:08.948633 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.949207 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.949930 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:1]; commitIndex := 2
22:39:08.985583 [TEST] Reconnect 2
22:39:08.993405 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.993486 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:08.995256 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:08.995597 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:08.995977 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2], matchIndex := map[0:2 2:1]; commitIndex := 2
22:39:09.000280 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:09.000578 [2] AppendEntries reply: {Term:3 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:09.001456 [1] term out of date in heartbeat reply
22:39:09.001560 [1] becomes Follower with term=3; log=[{5 1} {6 1} {7 1}]
22:39:09.001744 [1] election timer started (256ms), term=3
22:39:09.102555 [2] becomes Candidate (currentTerm=4); log=[{5 1} {6 1}]
22:39:09.102857 [2] sending RequestVote to 1: {Term:4 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:09.103002 [2] sending RequestVote to 0: {Term:4 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:09.103020 [2] election timer started (183ms), term=4
22:39:09.105125 [0] RequestVote: {Term:4 CandidateId:2 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=1, log index/term=(2, 1)]
22:39:09.105197 [0] ... term out of date in RequestVote
22:39:09.105287 [0] becomes Follower with term=4; log=[{5 1} {6 1} {7 1}]
22:39:09.105828 [0] ... RequestVote reply: &{Term:4 VoteGranted:false}
22:39:09.105966 [0] election timer started (284ms), term=4
22:39:09.106143 [1] RequestVote: {Term:4 CandidateId:2 LastLogIndex:1 LastLogTerm:1} [currentTerm=3, votedFor=-1, log index/term=(2, 1)]
22:39:09.106200 [1] ... term out of date in RequestVote
22:39:09.106295 [1] becomes Follower with term=4; log=[{5 1} {6 1} {7 1}]
22:39:09.106792 [1] ... RequestVote reply: &{Term:4 VoteGranted:false}
22:39:09.106975 [2] received RequestVoteReply {Term:4 VoteGranted:false}
22:39:09.107046 [1] election timer started (296ms), term=4
22:39:09.107145 [0] in election timer term changed from 1 to 4, bailing out
22:39:09.107656 [2] received RequestVoteReply {Term:4 VoteGranted:false}
22:39:09.112341 [1] in election timer term changed from 3 to 4, bailing out
22:39:09.294528 [2] becomes Candidate (currentTerm=5); log=[{5 1} {6 1}]
22:39:09.295012 [2] election timer started (226ms), term=5
22:39:09.295048 [2] sending RequestVote to 1: {Term:5 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:09.295037 [2] sending RequestVote to 0: {Term:5 CandidateId:2 LastLogIndex:1 LastLogTerm:1}
22:39:09.299263 [0] RequestVote: {Term:5 CandidateId:2 LastLogIndex:1 LastLogTerm:1} [currentTerm=4, votedFor=-1, log index/term=(2, 1)]
22:39:09.299334 [0] ... term out of date in RequestVote
22:39:09.299414 [0] becomes Follower with term=5; log=[{5 1} {6 1} {7 1}]
22:39:09.299934 [0] ... RequestVote reply: &{Term:5 VoteGranted:false}
22:39:09.300173 [1] RequestVote: {Term:5 CandidateId:2 LastLogIndex:1 LastLogTerm:1} [currentTerm=4, votedFor=-1, log index/term=(2, 1)]
22:39:09.300263 [0] election timer started (167ms), term=5
22:39:09.300270 [1] ... term out of date in RequestVote
22:39:09.300421 [2] received RequestVoteReply {Term:5 VoteGranted:false}
22:39:09.300467 [1] becomes Follower with term=5; log=[{5 1} {6 1} {7 1}]
22:39:09.300965 [1] ... RequestVote reply: &{Term:5 VoteGranted:false}
22:39:09.301089 [1] election timer started (246ms), term=5
22:39:09.301353 [2] received RequestVoteReply {Term:5 VoteGranted:false}
22:39:09.306601 [0] in election timer term changed from 4 to 5, bailing out
22:39:09.307814 [1] in election timer term changed from 4 to 5, bailing out
22:39:09.471520 [0] becomes Candidate (currentTerm=6); log=[{5 1} {6 1} {7 1}]
22:39:09.471925 [0] sending RequestVote to 2: {Term:6 CandidateId:0 LastLogIndex:2 LastLogTerm:1}
22:39:09.472018 [0] sending RequestVote to 1: {Term:6 CandidateId:0 LastLogIndex:2 LastLogTerm:1}
22:39:09.471953 [0] election timer started (296ms), term=6
22:39:09.474362 [2] RequestVote: {Term:6 CandidateId:0 LastLogIndex:2 LastLogTerm:1} [currentTerm=5, votedFor=2, log index/term=(1, 1)]
22:39:09.474416 [2] ... term out of date in RequestVote
22:39:09.474507 [2] becomes Follower with term=6; log=[{5 1} {6 1}]
22:39:09.474900 [2] ... RequestVote reply: &{Term:6 VoteGranted:true}
22:39:09.475132 [2] election timer started (298ms), term=6
22:39:09.475250 [2] in election timer term changed from 5 to 6, bailing out
22:39:09.475807 [0] received RequestVoteReply {Term:6 VoteGranted:true}
22:39:09.475862 [0] wins election with 2 votes
22:39:09.476006 [0] becomes Leader; term=6, nextIndex=map[1:3 2:3], matchIndex=map[1:-1 2:-1]; log=[{5 1} {6 1} {7 1}]
22:39:09.476409 [0] sending AppendEntries to 1: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.476439 [0] sending AppendEntries to 2: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.477329 [1] RequestVote: {Term:6 CandidateId:0 LastLogIndex:2 LastLogTerm:1} [currentTerm=5, votedFor=-1, log index/term=(2, 1)]
22:39:09.477387 [1] ... term out of date in RequestVote
22:39:09.477459 [1] becomes Follower with term=6; log=[{5 1} {6 1} {7 1}]
22:39:09.477870 [1] ... RequestVote reply: &{Term:6 VoteGranted:true}
22:39:09.478031 [1] election timer started (256ms), term=6
22:39:09.478746 [0] received RequestVoteReply {Term:6 VoteGranted:true}
22:39:09.478795 [0] while waiting for reply, state = Leader
22:39:09.480382 [1] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.480700 [1] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.481204 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:-1]; commitIndex := 2
22:39:09.481247 [1] in election timer term changed from 5 to 6, bailing out
22:39:09.481349 [2] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.481666 [2] AppendEntries reply: {Term:6 Success:false ConflictIndex:2 ConflictTerm:-1}
22:39:09.482112 [0] AppendEntries reply from 2 !success: nextIndex := 2
22:39:09.482191 [0] in election timer state=Leader, bailing out
22:39:09.527064 [0] sending AppendEntries to 2: ni=2, args={Term:6 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:09.527134 [0] sending AppendEntries to 1: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.531935 [2] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:09.532042 [2] ... inserting entries [{7 1}] from index 2
22:39:09.531950 [1] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.532124 [2] ... log is now: [{5 1} {6 1} {7 1}]
22:39:09.532199 [2] ... setting commitIndex=2
22:39:09.532466 [1] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.532550 [2] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.532692 [2] commitChanSender entries=[{7 1}], savedLastApplied=1
22:39:09.532807 [TEST] collectCommits(2) got {Command:7 Index:2 Term:6}
22:39:09.532951 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:2], matchIndex := map[1:2 2:-1]; commitIndex := 2
22:39:09.533096 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:09.577742 [0] sending AppendEntries to 1: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.577781 [0] sending AppendEntries to 2: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.582536 [1] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.582963 [1] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.583511 [2] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.583511 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:09.583959 [2] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.584394 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:09.628829 [0] sending AppendEntries to 2: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.628839 [0] sending AppendEntries to 1: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.633880 [2] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.634315 [2] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.634655 [1] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.634755 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:09.635005 [1] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.635383 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:09.679833 [0] sending AppendEntries to 2: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.679834 [0] sending AppendEntries to 1: ni=3, args={Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.682729 [1] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.683088 [1] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.683458 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:09.684567 [2] AppendEntries: {Term:6 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:09.684929 [2] AppendEntries reply: {Term:6 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.685308 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:09.690649 [0] becomes Dead
22:39:09.690760 [0] commitChanSender done
22:39:09.690795 [1] becomes Dead
22:39:09.690877 [1] commitChanSender done
22:39:09.690927 [2] becomes Dead
22:39:09.691030 [2] commitChanSender done
22:39:09.695911 [2] in election timer state=Dead, bailing out
22:39:09.698231 [1] in election timer state=Dead, bailing out
--- PASS: TestCommitWithDisconnectionAndRecover (1.82s)
=== RUN   TestNoCommitWithNoQuorum
22:39:09.746766 [0] listening at [::]:38047
22:39:09.747315 [1] listening at [::]:41761
22:39:09.747783 [2] listening at [::]:38925
22:39:09.751220 [2] election timer started (230ms), term=0
22:39:09.751240 [1] election timer started (269ms), term=0
22:39:09.751281 [0] election timer started (259ms), term=0
22:39:09.982290 [2] becomes Candidate (currentTerm=1); log=[]
22:39:09.982691 [2] election timer started (284ms), term=1
22:39:09.982707 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:09.982713 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:09.985785 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:09.985837 [1] ... term out of date in RequestVote
22:39:09.985872 [1] becomes Follower with term=1; log=[]
22:39:09.986239 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:09.986474 [1] election timer started (292ms), term=1
22:39:09.987101 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:09.987154 [2] wins election with 2 votes
22:39:09.987262 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:39:09.987616 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:09.987646 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:09.987688 [0] ... term out of date in RequestVote
22:39:09.987695 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:09.987792 [0] becomes Follower with term=1; log=[]
22:39:09.988290 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:09.988476 [0] election timer started (165ms), term=1
22:39:09.989200 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:09.989272 [2] while waiting for reply, state = Leader
22:39:09.989885 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:09.990178 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.990676 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:09.991595 [0] in election timer term changed from 0 to 1, bailing out
22:39:09.991654 [1] in election timer term changed from 0 to 1, bailing out
22:39:09.993971 [2] in election timer state=Leader, bailing out
22:39:09.994119 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:09.994509 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:09.995196 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:10.038821 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:10.038857 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:10.042608 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:10.042910 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.043327 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:10.045510 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:10.045833 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.046206 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:10.051717 [2] Submit received by Leader: 5
22:39:10.052004 [2] ... log=[{5 1}]
22:39:10.052052 [2] Submit received by Leader: 6
22:39:10.052282 [2] ... log=[{5 1} {6 1}]
22:39:10.052588 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.052765 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.052775 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.052872 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.054648 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.054690 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.054735 [0] ... inserting entries [{5 1} {6 1}] from index 0
22:39:10.054787 [1] ... inserting entries [{5 1} {6 1}] from index 0
22:39:10.054806 [0] ... log is now: [{5 1} {6 1}]
22:39:10.054862 [1] ... log is now: [{5 1} {6 1}]
22:39:10.055137 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.055168 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.055516 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.055535 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:10.055534 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:0], matchIndex := map[0:1 1:-1]; commitIndex := 1
22:39:10.055764 [2] leader sets commitIndex := 1
22:39:10.055937 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:10.055950 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.056053 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:10.055992 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.056166 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:10.055996 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.056436 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.056625 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.056631 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.056642 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.059188 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.059259 [1] ... setting commitIndex=1
22:39:10.059549 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.059823 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:10.059950 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:10.060024 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:10.059952 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.061989 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.062037 [0] ... setting commitIndex=1
22:39:10.062282 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.062445 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:10.062525 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:10.062552 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.062600 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:10.106306 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.106338 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.109965 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.110306 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.110644 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.112817 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.113126 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.113431 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.156728 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.156729 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.161898 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.162250 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.162581 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.162714 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.162895 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.163234 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.207790 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.207882 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.210508 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.210558 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.210809 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.210968 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.211313 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.211436 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.257788 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.257789 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.259596 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.260031 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.260604 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.262916 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.263307 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.263701 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:10.302435 [TEST] Disconnect 0
22:39:10.302963 [TEST] Disconnect 1
22:39:10.307774 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.307776 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.358003 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.358022 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.409030 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.409054 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.429628 [0] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
22:39:10.430129 [0] election timer started (250ms), term=2
22:39:10.430177 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:10.430294 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:10.458767 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.458808 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.509320 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.509344 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.553508 [2] Submit received by Leader: 8
22:39:10.553960 [2] ... log=[{5 1} {6 1} {8 1}]
22:39:10.554296 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.554317 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.557052 [1] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
22:39:10.557558 [1] election timer started (293ms), term=2
22:39:10.557572 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
22:39:10.557589 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
22:39:10.604462 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.604546 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.654379 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.654472 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.680383 [0] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
22:39:10.680789 [0] sending RequestVote to 2: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:10.680792 [0] election timer started (163ms), term=3
22:39:10.680898 [0] sending RequestVote to 1: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:10.704823 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.704874 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.755465 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.755840 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.804234 [TEST] Reconnect 0
22:39:10.805505 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.805584 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.806480 [TEST] Reconnect 1
22:39:10.852029 [0] becomes Candidate (currentTerm=4); log=[{5 1} {6 1}]
22:39:10.852426 [0] election timer started (173ms), term=4
22:39:10.852436 [0] sending RequestVote to 1: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:10.852496 [0] sending RequestVote to 2: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:10.856157 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.856179 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.857879 [2] RequestVote: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=2, log index/term=(2, 1)]
22:39:10.857897 [1] RequestVote: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=2, votedFor=1, log index/term=(1, 1)]
22:39:10.857926 [2] ... term out of date in RequestVote
22:39:10.857957 [1] ... term out of date in RequestVote
22:39:10.858034 [2] becomes Follower with term=4; log=[{5 1} {6 1} {8 1}]
22:39:10.858038 [1] becomes Follower with term=4; log=[{5 1} {6 1}]
22:39:10.858467 [2] ... RequestVote reply: &{Term:4 VoteGranted:false}
22:39:10.858471 [1] ... RequestVote reply: &{Term:4 VoteGranted:true}
22:39:10.858670 [2] election timer started (287ms), term=4
22:39:10.858679 [1] in election timer term changed from 2 to 4, bailing out
22:39:10.858920 [1] election timer started (285ms), term=4
22:39:10.859645 [0] received RequestVoteReply {Term:4 VoteGranted:false}
22:39:10.859710 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.859758 [0] received RequestVoteReply {Term:4 VoteGranted:true}
22:39:10.859818 [0] wins election with 2 votes
22:39:10.859928 [0] becomes Leader; term=4, nextIndex=map[1:2 2:2], matchIndex=map[1:-1 2:-1]; log=[{5 1} {6 1}]
22:39:10.860063 [1] AppendEntries reply: {Term:4 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:10.860286 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.860363 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.860931 [2] term out of date in heartbeat reply
22:39:10.861029 [2] becomes Follower with term=4; log=[{5 1} {6 1} {8 1}]
22:39:10.861202 [2] election timer started (259ms), term=4
22:39:10.863100 [0] in election timer state=Leader, bailing out
22:39:10.863298 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
22:39:10.863622 [0] AppendEntries reply: {Term:4 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:10.864480 [2] term out of date in heartbeat reply
22:39:10.864581 [2] becomes Follower with term=4; log=[{5 1} {6 1} {8 1}]
22:39:10.864763 [2] election timer started (161ms), term=4
22:39:10.867288 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.867328 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.867620 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.867645 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.868128 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:-1 2:1]; commitIndex := 1
22:39:10.868245 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:10.911539 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.911671 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.915473 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.915892 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.916333 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:10.917350 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.917667 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.918066 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:10.962611 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.962637 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.965278 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.965345 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:10.965696 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.965700 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:10.966148 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:10.966285 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.013635 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.013643 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.016458 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.016514 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.016838 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.016911 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.017198 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.017325 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.064677 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.064736 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.067725 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.068138 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.068623 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.070700 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.071033 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.071388 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.115734 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.116071 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.117979 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.118431 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.118871 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.122204 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.122556 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.122921 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.166191 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.166212 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.169030 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.169074 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.169470 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.169580 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.170007 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.170202 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.216742 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.216768 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.222616 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.222615 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.223054 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.223374 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.224051 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.224279 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.267899 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.267924 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.270507 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.270790 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.271142 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.274303 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.274578 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.274852 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.318305 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.318323 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.320982 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.321366 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.321832 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.321984 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.322293 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.322653 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.368444 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.368471 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.372138 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.372404 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.372699 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.374810 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:11.375149 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.375465 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:11.408684 [0] Submit received by Leader: 9
22:39:11.409376 [0] ... log=[{5 1} {6 1} {9 4}]
22:39:11.409492 [0] Submit received by Leader: 10
22:39:11.410039 [0] ... log=[{5 1} {6 1} {9 4} {10 4}]
22:39:11.410136 [0] Submit received by Leader: 11
22:39:11.411057 [0] ... log=[{5 1} {6 1} {9 4} {10 4} {11 4}]
22:39:11.411553 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.411711 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.411818 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.411989 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.412058 [0] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.412048 [0] sending AppendEntries to 1: ni=2, args={Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.415359 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.415455 [1] ... inserting entries [{9 4} {10 4} {11 4}] from index 2
22:39:11.415543 [1] ... log is now: [{5 1} {6 1} {9 4} {10 4} {11 4}]
22:39:11.416013 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.416322 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.416608 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.416704 [2] ... inserting entries [{9 4} {10 4} {11 4}] from index 2
22:39:11.416795 [2] ... log is now: [{5 1} {6 1} {9 4} {10 4} {11 4}]
22:39:11.416869 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.417193 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.417448 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.417532 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.417924 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:5], matchIndex := map[1:1 2:4]; commitIndex := 4
22:39:11.418006 [0] leader sets commitIndex := 4
22:39:11.418032 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.418153 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.418252 [0] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
22:39:11.418330 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.418421 [TEST] collectCommits(0) got {Command:9 Index:2 Term:4}
22:39:11.418559 [TEST] collectCommits(0) got {Command:10 Index:3 Term:4}
22:39:11.418591 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.418650 [TEST] collectCommits(0) got {Command:11 Index:4 Term:4}
22:39:11.418711 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
22:39:11.418792 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.419059 [0] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.419059 [0] sending AppendEntries to 1: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.419323 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.419133 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.419746 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.425137 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.425143 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.425188 [2] ... setting commitIndex=4
22:39:11.425224 [1] ... setting commitIndex=4
22:39:11.425740 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.426079 [2] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
22:39:11.426080 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.426197 [TEST] collectCommits(2) got {Command:9 Index:2 Term:4}
22:39:11.426255 [TEST] collectCommits(2) got {Command:10 Index:3 Term:4}
22:39:11.426299 [TEST] collectCommits(2) got {Command:11 Index:4 Term:4}
22:39:11.426311 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.426429 [1] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
22:39:11.426538 [TEST] collectCommits(1) got {Command:9 Index:2 Term:4}
22:39:11.426616 [TEST] collectCommits(1) got {Command:10 Index:3 Term:4}
22:39:11.426681 [TEST] collectCommits(1) got {Command:11 Index:4 Term:4}
22:39:11.426541 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.468698 [0] sending AppendEntries to 1: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.468745 [0] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.472558 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.473066 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.473726 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.473733 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.474684 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.475174 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.520097 [0] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.520109 [0] sending AppendEntries to 1: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.522645 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.522897 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.523190 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.526319 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.526577 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.526896 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.569922 [0] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.569936 [0] sending AppendEntries to 1: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.572468 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.572891 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.573194 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.575333 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.575629 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.575862 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.620243 [0] sending AppendEntries to 1: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.620345 [0] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.622926 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.623321 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.623644 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.625701 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.625935 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.626232 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.670842 [0] sending AppendEntries to 1: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.670857 [0] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.676104 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.676106 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.676630 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.676631 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.676955 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.677085 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.720998 [0] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.721029 [0] sending AppendEntries to 1: ni=5, args={Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.725608 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.725870 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
22:39:11.726095 [2] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.726316 [1] AppendEntries reply: {Term:4 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:11.726466 [0] AppendEntries reply from 2 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.726738 [0] AppendEntries reply from 1 success: nextIndex := map[1:5 2:5], matchIndex := map[1:4 2:4]; commitIndex := 4
22:39:11.762631 [0] becomes Dead
22:39:11.762735 [0] commitChanSender done
22:39:11.762843 [1] becomes Dead
22:39:11.762971 [1] commitChanSender done
22:39:11.763126 [2] becomes Dead
22:39:11.763248 [2] commitChanSender done
22:39:11.765372 [2] in election timer state=Dead, bailing out
22:39:11.769431 [2] in election timer state=Dead, bailing out
22:39:11.769479 [1] in election timer state=Dead, bailing out
22:39:11.771928 [2] in election timer state=Dead, bailing out
--- PASS: TestNoCommitWithNoQuorum (2.07s)
=== RUN   TestDisconnectLeaderBriefly
22:39:11.820869 [0] listening at [::]:44899
22:39:11.821315 [1] listening at [::]:41929
22:39:11.821675 [2] listening at [::]:43937
22:39:11.825193 [1] election timer started (199ms), term=0
22:39:11.825197 [0] election timer started (195ms), term=0
22:39:11.825313 [2] election timer started (265ms), term=0
22:39:12.026042 [1] becomes Candidate (currentTerm=1); log=[]
22:39:12.026103 [0] becomes Candidate (currentTerm=1); log=[]
22:39:12.026471 [1] election timer started (178ms), term=1
22:39:12.026489 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:12.026583 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:12.026631 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:12.026516 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:12.026524 [0] election timer started (225ms), term=1
22:39:12.030734 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
22:39:12.030783 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
22:39:12.031061 [0] ... RequestVote reply: &{Term:1 VoteGranted:false}
22:39:12.031151 [1] ... RequestVote reply: &{Term:1 VoteGranted:false}
22:39:12.031515 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:12.031565 [2] ... term out of date in RequestVote
22:39:12.031600 [2] becomes Follower with term=1; log=[]
22:39:12.031948 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:12.032183 [2] election timer started (244ms), term=1
22:39:12.032257 [1] received RequestVoteReply {Term:1 VoteGranted:false}
22:39:12.032339 [0] received RequestVoteReply {Term:1 VoteGranted:false}
22:39:12.032978 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:12.033037 [1] wins election with 2 votes
22:39:12.033046 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
22:39:12.033188 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:12.033320 [2] ... RequestVote reply: &{Term:1 VoteGranted:false}
22:39:12.033688 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.033694 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.034191 [0] received RequestVoteReply {Term:1 VoteGranted:false}
22:39:12.035427 [2] in election timer term changed from 0 to 1, bailing out
22:39:12.036621 [1] in election timer state=Leader, bailing out
22:39:12.036730 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.037064 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.037454 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.037507 [0] becomes Follower with term=1; log=[]
22:39:12.037615 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:12.037853 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.038122 [0] election timer started (219ms), term=1
22:39:12.038398 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:12.084338 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.084374 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.088020 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.088100 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:12.088353 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.088367 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.088789 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:12.088938 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:12.125712 [1] Submit received by Leader: 5
22:39:12.126075 [1] ... log=[{5 1}]
22:39:12.126144 [1] Submit received by Leader: 6
22:39:12.126392 [1] ... log=[{5 1} {6 1}]
22:39:12.126811 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.126918 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.126987 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.126996 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.129689 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.129760 [2] ... inserting entries [{5 1} {6 1}] from index 0
22:39:12.129807 [2] ... log is now: [{5 1} {6 1}]
22:39:12.130072 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.130324 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.130391 [0] ... inserting entries [{5 1} {6 1}] from index 0
22:39:12.130426 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:2], matchIndex := map[0:-1 2:1]; commitIndex := 1
22:39:12.130438 [0] ... log is now: [{5 1} {6 1}]
22:39:12.130492 [1] leader sets commitIndex := 1
22:39:12.130684 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:12.130759 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.130789 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:12.130884 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:12.130942 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.130974 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:1}
22:39:12.131167 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.132132 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.132500 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.132826 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.132911 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:12.133225 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.133548 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.133688 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.133741 [2] ... setting commitIndex=1
22:39:12.134050 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.134181 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:12.134274 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:12.134332 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:12.134353 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.137629 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:1}
22:39:12.137681 [0] ... setting commitIndex=1
22:39:12.137993 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.138171 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:12.138332 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:12.138443 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.138443 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:12.181040 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.181059 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.183564 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.183876 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.184223 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.186356 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.186632 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.186965 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.231616 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.231636 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.234082 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.234409 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.234820 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.237945 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.238186 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.238449 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.282088 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.282100 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.287964 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.287990 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.288443 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.288536 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.288986 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.289150 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.332853 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.332951 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.335567 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.335894 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.336342 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.337422 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.337865 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.338226 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.377510 [TEST] Disconnect 1
22:39:12.382798 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.383012 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.433703 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.433980 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.468468 [TEST] Reconnect 1
22:39:12.483514 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.483623 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.487560 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.487959 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.488883 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.489659 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.489939 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.490851 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.533697 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.533745 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.535518 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.535888 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.536201 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.537353 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.537676 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.538061 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.584444 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.584475 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.586199 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.586531 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.586790 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.587877 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.588179 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.588500 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.634293 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.634408 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.636834 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.636862 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:12.637171 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.637186 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.637466 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.637549 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]; commitIndex := 1
22:39:12.671947 [1] Submit received by Leader: 7
22:39:12.672615 [1] ... log=[{5 1} {6 1} {7 1}]
22:39:12.673145 [1] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:12.673166 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:12.678181 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:12.678295 [2] ... inserting entries [{7 1}] from index 2
22:39:12.678389 [2] ... log is now: [{5 1} {6 1} {7 1}]
22:39:12.678883 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.679427 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:12.679593 [0] ... inserting entries [{7 1}] from index 2
22:39:12.679596 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:3], matchIndex := map[0:1 2:2]; commitIndex := 2
22:39:12.679745 [0] ... log is now: [{5 1} {6 1} {7 1}]
22:39:12.679869 [1] leader sets commitIndex := 2
22:39:12.680124 [1] commitChanSender entries=[{7 1}], savedLastApplied=1
22:39:12.680275 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
22:39:12.680330 [1] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:12.680347 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.680382 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.682189 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.684399 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.684444 [2] ... setting commitIndex=2
22:39:12.684787 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.684996 [2] commitChanSender entries=[{7 1}], savedLastApplied=1
22:39:12.685113 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
22:39:12.685155 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.688418 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
22:39:12.688490 [0] ... setting commitIndex=2
22:39:12.688853 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.688950 [0] commitChanSender entries=[{7 1}], savedLastApplied=1
22:39:12.689059 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
22:39:12.689242 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.730397 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.730404 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.733103 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.733459 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.733847 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.735986 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.736292 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.736667 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.781082 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.781103 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.782735 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.783105 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.783501 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.785629 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.785922 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.786256 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.831475 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.831495 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.835162 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.835550 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.835909 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.836082 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.836396 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.836741 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.881538 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.881589 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.884085 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.884534 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.884945 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.887125 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:12.887527 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:12.887900 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:12.924328 [0] becomes Dead
22:39:12.924444 [0] commitChanSender done
22:39:12.924549 [1] becomes Dead
22:39:12.924666 [1] commitChanSender done
22:39:12.924786 [2] becomes Dead
22:39:12.924861 [2] commitChanSender done
--- PASS: TestDisconnectLeaderBriefly (1.10s)
=== RUN   TestCommitsWithLeaderDisconnects
22:39:12.927556 [0] in election timer state=Dead, bailing out
22:39:12.927667 [0] listening at [::]:36139
22:39:12.928079 [1] listening at [::]:35547
22:39:12.928224 [0] in election timer state=Dead, bailing out
22:39:12.928433 [2] listening at [::]:44787
22:39:12.928789 [3] listening at [::]:46661
22:39:12.929146 [4] listening at [::]:38167
22:39:12.932306 [2] in election timer state=Dead, bailing out
22:39:12.939042 [3] election timer started (180ms), term=0
22:39:12.939067 [4] election timer started (151ms), term=0
22:39:12.939101 [2] election timer started (180ms), term=0
22:39:12.939129 [0] election timer started (195ms), term=0
22:39:12.939050 [1] election timer started (228ms), term=0
22:39:13.099963 [4] becomes Candidate (currentTerm=1); log=[]
22:39:13.100543 [4] election timer started (289ms), term=1
22:39:13.100555 [4] sending RequestVote to 3: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:13.100660 [4] sending RequestVote to 1: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:13.100694 [4] sending RequestVote to 2: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:13.100555 [4] sending RequestVote to 0: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
22:39:13.105932 [3] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:13.105993 [3] ... term out of date in RequestVote
22:39:13.106054 [3] becomes Follower with term=1; log=[]
22:39:13.106375 [3] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:13.106606 [3] election timer started (212ms), term=1
22:39:13.106665 [0] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:13.106726 [0] ... term out of date in RequestVote
22:39:13.106769 [0] becomes Follower with term=1; log=[]
22:39:13.107074 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:13.107194 [1] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:13.107278 [1] ... term out of date in RequestVote
22:39:13.107299 [4] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:13.107283 [0] election timer started (184ms), term=1
22:39:13.107361 [1] becomes Follower with term=1; log=[]
22:39:13.107537 [2] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:13.107629 [2] ... term out of date in RequestVote
22:39:13.107685 [2] becomes Follower with term=1; log=[]
22:39:13.107979 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:13.108031 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:13.108153 [1] election timer started (284ms), term=1
22:39:13.108156 [4] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:13.108255 [2] election timer started (198ms), term=1
22:39:13.108261 [4] wins election with 3 votes
22:39:13.108493 [4] becomes Leader; term=1, nextIndex=map[0:0 1:0 2:0 3:0], matchIndex=map[0:-1 1:-1 2:-1 3:-1]; log=[]
22:39:13.108912 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.108951 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.108913 [4] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:13.109105 [4] while waiting for reply, state = Leader
22:39:13.109193 [3] in election timer term changed from 0 to 1, bailing out
22:39:13.109217 [2] in election timer term changed from 0 to 1, bailing out
22:39:13.109310 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.109301 [4] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:13.109472 [4] while waiting for reply, state = Leader
22:39:13.109325 [0] in election timer term changed from 0 to 1, bailing out
22:39:13.109369 [1] in election timer term changed from 0 to 1, bailing out
22:39:13.109676 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.111339 [4] in election timer state=Leader, bailing out
22:39:13.111428 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.111692 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.112167 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.112199 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.112443 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.112780 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.113015 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.113020 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.113621 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.115704 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.115918 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.116433 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.159595 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.159664 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.159720 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.159761 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.161326 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.161584 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.161979 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.162957 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.163063 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.163183 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.163385 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.163622 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.163791 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.165886 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.166127 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.166430 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.210055 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.210084 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.210124 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.210194 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.212913 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.213185 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.213578 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.213752 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.213857 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.213857 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:13.214041 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.214258 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.214266 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.214435 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.214733 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.214907 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]; commitIndex := -1
22:39:13.239966 [4] Submit received by Leader: 5
22:39:13.240302 [4] ... log=[{5 1}]
22:39:13.240361 [4] Submit received by Leader: 6
22:39:13.240629 [4] ... log=[{5 1} {6 1}]
22:39:13.241041 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.241092 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.241153 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.241310 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.241418 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.241583 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.241794 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.241997 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.243949 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.244045 [1] ... inserting entries [{5 1} {6 1}] from index 0
22:39:13.244124 [1] ... log is now: [{5 1} {6 1}]
22:39:13.244816 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.245136 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.245350 [2] ... inserting entries [{5 1} {6 1}] from index 0
22:39:13.245467 [2] ... log is now: [{5 1} {6 1}]
22:39:13.245519 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.245620 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:2 2:0 3:0], matchIndex := map[0:-1 1:1 2:-1 3:-1]; commitIndex := -1
22:39:13.245662 [0] ... inserting entries [{5 1} {6 1}] from index 0
22:39:13.245821 [0] ... log is now: [{5 1} {6 1}]
22:39:13.246142 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.246446 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.246531 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.246740 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.246912 [3] ... inserting entries [{5 1} {6 1}] from index 0
22:39:13.246955 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.247014 [3] ... log is now: [{5 1} {6 1}]
22:39:13.247165 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.247640 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.247641 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.247859 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:0 3:0], matchIndex := map[0:1 1:1 2:-1 3:-1]; commitIndex := 1
22:39:13.247928 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.247950 [4] leader sets commitIndex := 1
22:39:13.248015 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:13.248326 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:0], matchIndex := map[0:1 1:1 2:1 3:-1]; commitIndex := 1
22:39:13.248545 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.248633 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:0], matchIndex := map[0:1 1:1 2:1 3:-1]; commitIndex := 1
22:39:13.248787 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.248921 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:0], matchIndex := map[0:1 1:1 2:1 3:-1]; commitIndex := 1
22:39:13.249120 [4] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:13.249242 [TEST] collectCommits(4) got {Command:5 Index:0 Term:1}
22:39:13.249338 [TEST] collectCommits(4) got {Command:6 Index:1 Term:1}
22:39:13.249358 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:0], matchIndex := map[0:1 1:1 2:1 3:-1]; commitIndex := 1
22:39:13.249591 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.249834 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.250165 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.250204 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.250276 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.250188 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.253290 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.253331 [3] ... setting commitIndex=1
22:39:13.253655 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.253957 [3] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:13.254032 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.254092 [TEST] collectCommits(3) got {Command:5 Index:0 Term:1}
22:39:13.254123 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.254202 [TEST] collectCommits(3) got {Command:6 Index:1 Term:1}
22:39:13.254214 [0] ... setting commitIndex=1
22:39:13.254144 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.254427 [1] ... setting commitIndex=1
22:39:13.254714 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.254880 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:13.254895 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.255002 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:13.255091 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:13.255172 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.255179 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:13.255177 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.255357 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:13.255377 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.255445 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:13.255375 [2] ... setting commitIndex=1
22:39:13.255816 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.256061 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:13.256161 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:13.256230 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:13.256260 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.298674 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.298733 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.298791 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.298814 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.300456 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.300776 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.301154 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.302168 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.302506 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.302786 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.302826 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.303115 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.303522 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.303532 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.303903 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.304384 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.349327 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.349375 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.349371 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.349334 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.352315 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.352364 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.352718 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.352720 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.352991 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.353181 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.353385 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.353408 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.353758 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.355891 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.356281 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.356847 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.400111 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.400271 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.400302 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.400404 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.402326 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.402960 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.403326 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.403710 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.403861 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.404012 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.404598 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.404600 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.405224 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.406285 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.406647 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.407162 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.450363 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.450490 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.450542 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.450499 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.452142 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.452246 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.452559 [3] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.452715 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.452908 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.453107 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.453158 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.453114 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.453872 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.453949 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.454396 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.454583 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]; commitIndex := 1
22:39:13.491190 [TEST] Disconnect 4
22:39:13.500918 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.500944 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.501029 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.500928 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.502847 [4] Submit received by Leader: 7
22:39:13.503252 [4] ... log=[{5 1} {6 1} {7 1}]
22:39:13.503599 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.503636 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.503766 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.503775 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.553949 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.554008 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.554127 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.554132 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.604808 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.604857 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.604977 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.605037 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.638131 [0] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
22:39:13.638834 [0] election timer started (203ms), term=2
22:39:13.638863 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:13.638990 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:13.639000 [0] sending RequestVote to 3: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:13.639242 [0] sending RequestVote to 4: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
22:39:13.641944 [1] RequestVote: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=4, log index/term=(1, 1)]
22:39:13.641990 [1] ... term out of date in RequestVote
22:39:13.642053 [1] becomes Follower with term=2; log=[{5 1} {6 1}]
22:39:13.642428 [1] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:13.642619 [1] election timer started (268ms), term=2
22:39:13.643239 [0] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:13.646036 [2] RequestVote: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=4, log index/term=(1, 1)]
22:39:13.646081 [2] ... term out of date in RequestVote
22:39:13.646133 [2] becomes Follower with term=2; log=[{5 1} {6 1}]
22:39:13.646383 [3] RequestVote: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=4, log index/term=(1, 1)]
22:39:13.646439 [3] ... term out of date in RequestVote
22:39:13.646482 [2] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:13.646537 [3] becomes Follower with term=2; log=[{5 1} {6 1}]
22:39:13.646655 [2] election timer started (279ms), term=2
22:39:13.647004 [3] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:13.647163 [3] in election timer term changed from 1 to 2, bailing out
22:39:13.647331 [3] election timer started (161ms), term=2
22:39:13.647558 [0] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:13.647679 [0] wins election with 3 votes
22:39:13.647860 [0] becomes Leader; term=2, nextIndex=map[1:2 2:2 3:2 4:2], matchIndex=map[1:-1 2:-1 3:-1 4:-1]; log=[{5 1} {6 1}]
22:39:13.648298 [0] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:13.648349 [0] sending AppendEntries to 1: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.648298 [1] in election timer term changed from 1 to 2, bailing out
22:39:13.648371 [0] while waiting for reply, state = Leader
22:39:13.648378 [2] in election timer term changed from 1 to 2, bailing out
22:39:13.648840 [0] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.648866 [0] sending AppendEntries to 3: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.648922 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.649095 [0] in election timer state=Leader, bailing out
22:39:13.653591 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.653906 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.654431 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:-1 2:-1 3:1 4:-1]; commitIndex := 1
22:39:13.654729 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.654811 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.654823 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.654991 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.655017 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.655006 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.655216 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.655343 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.655846 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:-1 3:1 4:-1]; commitIndex := 1
22:39:13.656017 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.699575 [0] sending AppendEntries to 1: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.699699 [0] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.699795 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.700039 [0] sending AppendEntries to 3: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.702898 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.703308 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.703606 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.703711 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.703960 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.704348 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.704496 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.704822 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.705170 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.705392 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.705457 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.705457 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.705395 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.750514 [0] sending AppendEntries to 1: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.750598 [0] sending AppendEntries to 3: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.750641 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.750521 [0] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.752334 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.752428 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.752685 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.752895 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.753119 [0] AppendEntries reply from 3 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.753341 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.753474 [0] Submit received by Leader: 8
22:39:13.753848 [0] ... log=[{5 1} {6 1} {8 2}]
22:39:13.754217 [0] sending AppendEntries to 1: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:13.754298 [0] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:13.754334 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:13.754313 [0] sending AppendEntries to 3: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:13.756185 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.756235 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:13.756264 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.756217 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.756278 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.756679 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.757108 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2 3:2 4:2], matchIndex := map[1:1 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.759276 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:13.759305 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:13.759350 [3] ... inserting entries [{8 2}] from index 2
22:39:13.759383 [1] ... inserting entries [{8 2}] from index 2
22:39:13.759436 [3] ... log is now: [{5 1} {6 1} {8 2}]
22:39:13.759452 [1] ... log is now: [{5 1} {6 1} {8 2}]
22:39:13.759803 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.759822 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.760082 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:13.760152 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:2 3:2 4:2], matchIndex := map[1:2 2:1 3:1 4:-1]; commitIndex := 1
22:39:13.760156 [2] ... inserting entries [{8 2}] from index 2
22:39:13.760324 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:2 3:3 4:2], matchIndex := map[1:2 2:1 3:2 4:-1]; commitIndex := 2
22:39:13.760373 [0] leader sets commitIndex := 2
22:39:13.760328 [2] ... log is now: [{5 1} {6 1} {8 2}]
22:39:13.760463 [0] commitChanSender entries=[{8 2}], savedLastApplied=1
22:39:13.760579 [TEST] collectCommits(0) got {Command:8 Index:2 Term:2}
22:39:13.760726 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.760810 [0] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:13.760845 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.760958 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.760997 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:13.761289 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.764604 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:13.764664 [2] ... setting commitIndex=2
22:39:13.765000 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.765168 [2] commitChanSender entries=[{8 2}], savedLastApplied=1
22:39:13.765286 [TEST] collectCommits(2) got {Command:8 Index:2 Term:2}
22:39:13.765329 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.765381 [1] ... setting commitIndex=2
22:39:13.765401 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.765522 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.765574 [3] ... setting commitIndex=2
22:39:13.765788 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.765904 [1] commitChanSender entries=[{8 2}], savedLastApplied=1
22:39:13.766005 [TEST] collectCommits(1) got {Command:8 Index:2 Term:2}
22:39:13.766031 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.766216 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.766224 [3] commitChanSender entries=[{8 2}], savedLastApplied=1
22:39:13.766358 [TEST] collectCommits(3) got {Command:8 Index:2 Term:2}
22:39:13.766434 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.807045 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.807094 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.807096 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.807119 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.811455 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.811572 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.811640 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.811682 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:13.814265 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.814636 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.815026 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.815147 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.815481 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.815830 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.816897 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.817203 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.817510 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.857157 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.857176 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.857297 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.857315 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.861460 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.861611 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.861800 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:13.861825 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.867009 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.867467 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.867733 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.867736 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.867968 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.868240 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.868256 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.868689 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.868819 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.907560 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.908196 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.908197 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.908395 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.912072 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.912145 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.912256 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.912262 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:13.914838 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.915313 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.915749 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.917853 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.917880 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.918256 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.918261 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.918753 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.919001 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.957779 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.957821 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.957784 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.957843 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:13.962200 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.962366 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.962417 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.962389 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:13.965979 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.966315 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.966759 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.966911 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.966968 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:13.967288 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.967346 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:13.967724 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:13.967865 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:14.004473 [TEST] Reconnect 4
22:39:14.008161 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.008280 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.008355 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.008459 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.013053 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.013466 [0] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:14.013677 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.013823 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.013899 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.013919 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.014052 [0] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:14.014198 [3] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:14.014898 [4] term out of date in heartbeat reply
22:39:14.014982 [4] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:14.015169 [4] election timer started (298ms), term=2
22:39:14.015255 [4] term out of date in heartbeat reply
22:39:14.015344 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.015370 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
22:39:14.015364 [4] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:14.015735 [1] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:14.015751 [4] election timer started (179ms), term=2
22:39:14.015800 [2] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:14.016693 [4] term out of date in heartbeat reply
22:39:14.016786 [4] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:14.016924 [4] term out of date in heartbeat reply
22:39:14.017003 [4] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:14.017159 [4] election timer started (182ms), term=2
22:39:14.017221 [4] election timer started (231ms), term=2
22:39:14.018521 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.018868 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.019109 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.019278 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:14.019416 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.019639 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.019834 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
22:39:14.019855 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:14.019918 [4] ... inserting entries [{8 2}] from index 2
22:39:14.019950 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.020013 [4] ... log is now: [{5 1} {6 1} {8 2}]
22:39:14.020066 [4] ... setting commitIndex=2
22:39:14.020249 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:2], matchIndex := map[1:2 2:2 3:2 4:-1]; commitIndex := 2
22:39:14.020439 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.020611 [4] commitChanSender entries=[{8 2}], savedLastApplied=1
22:39:14.020692 [TEST] collectCommits(4) got {Command:8 Index:2 Term:2}
22:39:14.021311 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.063958 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.064051 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.064084 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.064145 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.065795 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.066157 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.066587 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.068722 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.068871 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.068723 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.069260 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.069312 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.069366 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.069726 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.069893 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.070033 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.113990 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.114018 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.114137 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.114154 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.115679 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.116031 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.116439 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.117450 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.117774 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.118105 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.119146 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.119585 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.119884 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.120010 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.120279 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.120758 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.165054 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.165241 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.165265 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.165321 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.167930 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.167940 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.168048 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.168330 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.168342 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.168395 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.168897 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.169071 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.169252 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.169968 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.170323 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.170665 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.215821 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.215851 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.215886 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.215947 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.218596 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.218639 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.218979 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.219130 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.219438 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.219589 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.221762 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.221804 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.222162 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.222241 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.222608 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.222825 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.266869 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.266970 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.267076 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.267088 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.269684 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.269808 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.270010 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.270233 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.270401 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.270608 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.272659 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.272742 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.273004 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.273064 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.273433 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.273579 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.317440 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.317522 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.317568 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.317609 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.319056 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.319505 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.319962 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.320118 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.320483 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.320930 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.321909 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.322216 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.322460 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.322606 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.322776 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.323132 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.368672 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.368818 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.368824 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.368991 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.370480 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.370758 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.371066 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.372115 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.372126 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.372419 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.372419 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.372553 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.372831 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.372832 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.373000 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.373153 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.419713 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.419824 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.419891 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.419903 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.423645 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.424182 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.424608 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.424697 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.425075 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.425130 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.425489 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.425741 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.425919 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.426339 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.426359 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.426807 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.470121 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.470152 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.470140 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.470178 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.473028 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.473522 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.473814 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.473916 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.473925 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.474191 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.474322 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.474580 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.474751 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.474857 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.475125 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.475440 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.520883 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.520926 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.520950 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.521027 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.522692 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.523047 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.523357 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.525588 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.525607 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.525653 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.526023 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.526067 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.526118 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.526394 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.526561 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.526714 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.571065 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.571097 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.571159 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.571127 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.575970 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.576103 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.576104 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.576309 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.576622 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.576679 [0] AppendEntries reply from 3 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.576703 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.576862 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
22:39:14.577144 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.577248 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.577385 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.577628 [0] AppendEntries reply from 4 success: nextIndex := map[1:3 2:3 3:3 4:3], matchIndex := map[1:2 2:2 3:2 4:2]; commitIndex := 2
22:39:14.610183 [0] Submit received by Leader: 9
22:39:14.610656 [0] ... log=[{5 1} {6 1} {8 2} {9 2}]
22:39:14.611239 [0] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.611316 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.611420 [0] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.611462 [0] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.615378 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.615442 [1] ... inserting entries [{9 2}] from index 3
22:39:14.615506 [1] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
22:39:14.615872 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.616278 [0] AppendEntries reply from 1 success: nextIndex := map[1:4 2:3 3:3 4:3], matchIndex := map[1:3 2:2 3:2 4:2]; commitIndex := 2
22:39:14.616334 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.616407 [3] ... inserting entries [{9 2}] from index 3
22:39:14.616422 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.616501 [3] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
22:39:14.616530 [4] ... inserting entries [{9 2}] from index 3
22:39:14.616617 [4] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
22:39:14.616837 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.616976 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.617255 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:14.617292 [0] AppendEntries reply from 3 success: nextIndex := map[1:4 2:3 3:4 4:3], matchIndex := map[1:3 2:2 3:3 4:2]; commitIndex := 3
22:39:14.617324 [2] ... inserting entries [{9 2}] from index 3
22:39:14.617365 [0] leader sets commitIndex := 3
22:39:14.617437 [2] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
22:39:14.617545 [0] commitChanSender entries=[{9 2}], savedLastApplied=2
22:39:14.617623 [0] AppendEntries reply from 4 success: nextIndex := map[1:4 2:3 3:4 4:4], matchIndex := map[1:3 2:2 3:3 4:3]; commitIndex := 3
22:39:14.617632 [TEST] collectCommits(0) got {Command:9 Index:3 Term:2}
22:39:14.617874 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.617942 [0] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.618064 [0] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:3}
22:39:14.618132 [0] sending AppendEntries to 3: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.618207 [0] sending AppendEntries to 4: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.618415 [0] AppendEntries reply from 2 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.620787 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.620790 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:3}
22:39:14.620854 [1] ... setting commitIndex=3
22:39:14.620807 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.621088 [3] ... setting commitIndex=3
22:39:14.620894 [2] ... setting commitIndex=3
22:39:14.621450 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.621453 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.621668 [3] commitChanSender entries=[{9 2}], savedLastApplied=2
22:39:14.621675 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.621810 [TEST] collectCommits(3) got {Command:9 Index:3 Term:2}
22:39:14.621820 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.621734 [1] commitChanSender entries=[{9 2}], savedLastApplied=2
22:39:14.621938 [0] AppendEntries reply from 3 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.622043 [TEST] collectCommits(1) got {Command:9 Index:3 Term:2}
22:39:14.621836 [2] commitChanSender entries=[{9 2}], savedLastApplied=2
22:39:14.621924 [4] ... setting commitIndex=3
22:39:14.622166 [0] AppendEntries reply from 1 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.622181 [TEST] collectCommits(2) got {Command:9 Index:3 Term:2}
22:39:14.622351 [0] AppendEntries reply from 2 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.622539 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.622638 [4] commitChanSender entries=[{9 2}], savedLastApplied=2
22:39:14.622718 [TEST] collectCommits(4) got {Command:9 Index:3 Term:2}
22:39:14.622948 [0] AppendEntries reply from 4 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.668317 [0] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.668376 [0] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.668421 [0] sending AppendEntries to 3: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.668467 [0] sending AppendEntries to 4: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.670101 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.670488 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.670907 [0] AppendEntries reply from 1 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.671064 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.671437 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.671790 [0] AppendEntries reply from 2 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.672810 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.672892 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.673159 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.673284 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.673592 [0] AppendEntries reply from 4 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.673754 [0] AppendEntries reply from 3 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.719215 [0] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.719311 [0] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.719739 [0] sending AppendEntries to 3: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.719771 [0] sending AppendEntries to 4: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.721436 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.721824 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.722252 [0] AppendEntries reply from 1 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.722433 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.722913 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.723404 [0] AppendEntries reply from 2 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.726464 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.726469 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.726839 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.726900 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.727183 [0] AppendEntries reply from 3 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.727363 [0] AppendEntries reply from 4 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.769993 [0] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.770042 [0] sending AppendEntries to 4: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.770110 [0] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.770063 [0] sending AppendEntries to 3: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.771904 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.772296 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.772662 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.772803 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.772838 [0] AppendEntries reply from 1 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.773152 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.773341 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.773761 [0] AppendEntries reply from 3 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.773804 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.774016 [0] AppendEntries reply from 4 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.774265 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.774649 [0] AppendEntries reply from 2 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.820778 [0] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.820826 [0] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.820865 [0] sending AppendEntries to 3: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.820925 [0] sending AppendEntries to 4: ni=4, args={Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.823534 [4] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.823657 [1] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.823746 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.823947 [4] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.824093 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.824224 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.824422 [0] AppendEntries reply from 4 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.824520 [3] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:14.824642 [0] AppendEntries reply from 1 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.824815 [0] AppendEntries reply from 2 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.824943 [3] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:14.825305 [0] AppendEntries reply from 3 success: nextIndex := map[1:4 2:4 3:4 4:4], matchIndex := map[1:3 2:3 3:3 4:3]; commitIndex := 3
22:39:14.862875 [0] becomes Dead
22:39:14.862965 [0] commitChanSender done
22:39:14.863101 [1] becomes Dead
22:39:14.863222 [1] commitChanSender done
22:39:14.863285 [2] becomes Dead
22:39:14.863367 [2] commitChanSender done
22:39:14.863510 [3] becomes Dead
22:39:14.863636 [4] becomes Dead
22:39:14.863659 [3] commitChanSender done
22:39:14.863725 [4] commitChanSender done
22:39:14.865437 [4] in election timer state=Dead, bailing out
22:39:14.866718 [4] in election timer state=Dead, bailing out
22:39:14.866793 [2] in election timer state=Dead, bailing out
22:39:14.867788 [4] in election timer state=Dead, bailing out
22:39:14.867846 [3] in election timer state=Dead, bailing out
22:39:14.867994 [4] in election timer state=Dead, bailing out
22:39:14.873412 [1] in election timer state=Dead, bailing out
--- PASS: TestCommitsWithLeaderDisconnects (1.99s)
=== RUN   TestCrashFollower
22:39:14.921100 [0] listening at [::]:45867
22:39:14.921529 [1] listening at [::]:44061
22:39:14.921913 [2] listening at [::]:44369
22:39:14.925412 [1] election timer started (268ms), term=0
22:39:14.925434 [0] election timer started (282ms), term=0
22:39:14.925526 [2] election timer started (295ms), term=0
22:39:15.196599 [1] becomes Candidate (currentTerm=1); log=[]
22:39:15.196989 [1] election timer started (224ms), term=1
22:39:15.197000 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:15.197029 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:15.200603 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:15.200658 [0] ... term out of date in RequestVote
22:39:15.200699 [0] becomes Follower with term=1; log=[]
22:39:15.201015 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:15.201262 [0] election timer started (174ms), term=1
22:39:15.201886 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:15.201943 [1] wins election with 2 votes
22:39:15.202047 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:15.202422 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:15.202456 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:15.202533 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:15.202598 [2] ... term out of date in RequestVote
22:39:15.202652 [2] becomes Follower with term=1; log=[]
22:39:15.203035 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:15.203164 [2] election timer started (164ms), term=1
22:39:15.203950 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:15.204009 [1] while waiting for reply, state = Leader
22:39:15.206315 [0] in election timer term changed from 0 to 1, bailing out
22:39:15.206416 [2] in election timer term changed from 0 to 1, bailing out
22:39:15.206610 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:15.207013 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.207531 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:15.207560 [1] in election timer state=Leader, bailing out
22:39:15.207716 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:15.207810 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.208354 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:15.227019 [1] Submit received by Leader: 5
22:39:15.227399 [1] ... log=[{5 1}]
22:39:15.227741 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:15.227789 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:15.230309 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:15.230369 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:15.230470 [2] ... inserting entries [{5 1}] from index 0
22:39:15.230380 [0] ... inserting entries [{5 1}] from index 0
22:39:15.230540 [2] ... log is now: [{5 1}]
22:39:15.230586 [0] ... log is now: [{5 1}]
22:39:15.230877 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.230951 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.231333 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:1], matchIndex := map[0:-1 2:0]; commitIndex := 0
22:39:15.231390 [1] leader sets commitIndex := 0
22:39:15.231560 [1] commitChanSender entries=[{5 1}], savedLastApplied=-1
22:39:15.231667 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:15.231567 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.231979 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.232088 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.233590 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.233692 [0] ... setting commitIndex=0
22:39:15.234089 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.234271 [0] commitChanSender entries=[{5 1}], savedLastApplied=-1
22:39:15.234394 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:15.234493 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.234624 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.234697 [2] ... setting commitIndex=0
22:39:15.234995 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.235171 [2] commitChanSender entries=[{5 1}], savedLastApplied=-1
22:39:15.235332 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:15.235399 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.282275 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.282288 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.286064 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.286361 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.286719 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.288805 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.289113 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.289478 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.332542 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.332606 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.335145 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.335147 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.335536 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.335619 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.335997 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.336165 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.382924 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.382955 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.385519 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.385831 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.386209 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.387251 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.387526 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.387881 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.433518 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.433567 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.437441 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.437775 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.438188 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.438351 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.438638 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.439005 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.484051 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.484052 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.485830 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.486138 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.486514 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.488595 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.488889 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.489292 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.534959 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.534988 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.541008 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.541029 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.541407 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.541408 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.541843 [1] AppendEntries reply from 2 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.541989 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.577966 [TEST] Crash 2
22:39:15.578081 [TEST] Disconnect 2
22:39:15.579077 [2] becomes Dead
22:39:15.579196 [2] commitChanSender done
22:39:15.583426 [2] in election timer state=Dead, bailing out
22:39:15.586088 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.586192 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.589949 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.590345 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.590701 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.636967 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.637000 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.639427 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.639710 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.639969 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.687939 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.687964 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.691685 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.691987 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.692355 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.738335 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.738347 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.741972 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.742254 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.742610 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.788442 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.788445 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.791116 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.791485 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.791825 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.839076 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.839078 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.841978 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.842283 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.842787 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.889404 [1] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.889475 [1] sending AppendEntries to 2: ni=1, args={Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.892135 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
22:39:15.892539 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:15.893019 [1] AppendEntries reply from 0 success: nextIndex := map[0:1 2:1], matchIndex := map[0:0 2:0]; commitIndex := 0
22:39:15.930148 [0] becomes Dead
22:39:15.930235 [0] commitChanSender done
22:39:15.930379 [1] becomes Dead
22:39:15.930565 [1] commitChanSender done
22:39:15.932443 [0] in election timer state=Dead, bailing out
--- PASS: TestCrashFollower (1.07s)
=== RUN   TestCrashThenRestartFollower
22:39:15.986745 [0] listening at [::]:36445
22:39:15.987189 [1] listening at [::]:39829
22:39:15.987570 [2] listening at [::]:37503
22:39:15.990478 [2] election timer started (280ms), term=0
22:39:15.990524 [0] election timer started (265ms), term=0
22:39:15.990494 [1] election timer started (210ms), term=0
22:39:16.201719 [1] becomes Candidate (currentTerm=1); log=[]
22:39:16.202113 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:16.202154 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:16.202139 [1] election timer started (197ms), term=1
22:39:16.207519 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:16.207584 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:16.207660 [0] ... term out of date in RequestVote
22:39:16.207600 [2] ... term out of date in RequestVote
22:39:16.207752 [0] becomes Follower with term=1; log=[]
22:39:16.207839 [2] becomes Follower with term=1; log=[]
22:39:16.208269 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:16.208269 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:16.208482 [2] election timer started (188ms), term=1
22:39:16.208562 [0] election timer started (295ms), term=1
22:39:16.209360 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:16.209432 [1] wins election with 2 votes
22:39:16.209544 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:16.209786 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:16.209869 [1] while waiting for reply, state = Leader
22:39:16.210101 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.210101 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.210697 [2] in election timer term changed from 0 to 1, bailing out
22:39:16.210812 [0] in election timer term changed from 0 to 1, bailing out
22:39:16.213019 [1] in election timer state=Leader, bailing out
22:39:16.214291 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.214296 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.214722 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.214738 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.215397 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:16.215574 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:16.261185 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.261226 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.263791 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.264055 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.264397 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:16.267697 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:16.268080 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.268481 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:16.291764 [1] Submit received by Leader: 5
22:39:16.292101 [1] ... log=[{5 1}]
22:39:16.292158 [1] Submit received by Leader: 6
22:39:16.292438 [1] ... log=[{5 1} {6 1}]
22:39:16.292493 [1] Submit received by Leader: 7
22:39:16.292788 [1] ... log=[{5 1} {6 1} {7 1}]
22:39:16.293094 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.293261 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.293332 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.293468 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.293505 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.293577 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.296414 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.296496 [0] ... inserting entries [{5 1} {6 1} {7 1}] from index 0
22:39:16.296559 [0] ... log is now: [{5 1} {6 1} {7 1}]
22:39:16.296860 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.297072 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.297578 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:0], matchIndex := map[0:2 2:-1]; commitIndex := 2
22:39:16.297669 [1] leader sets commitIndex := 2
22:39:16.297900 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.297996 [1] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:16.298121 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.298190 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.298272 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.298319 [2] ... inserting entries [{5 1} {6 1} {7 1}] from index 0
22:39:16.298203 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:16.298530 [2] ... log is now: [{5 1} {6 1} {7 1}]
22:39:16.298327 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:2}
22:39:16.298622 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:16.298920 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.298937 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
22:39:16.299247 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.299711 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:0], matchIndex := map[0:2 2:-1]; commitIndex := 2
22:39:16.299726 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.299928 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:0], matchIndex := map[0:2 2:-1]; commitIndex := 2
22:39:16.300219 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.300306 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.300539 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:16.300761 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.301000 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.301469 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.304628 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.304675 [0] ... setting commitIndex=2
22:39:16.304970 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:2}
22:39:16.305035 [2] ... setting commitIndex=2
22:39:16.305053 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.305318 [0] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:16.305407 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:16.305419 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.305484 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:16.305491 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.305564 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
22:39:16.305691 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:16.305818 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:16.305887 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:16.305906 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.305950 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
22:39:16.348514 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.348543 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.351023 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.351390 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.351758 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.354962 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.355287 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.355604 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.399084 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.399187 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.401705 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.402122 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.402612 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.404715 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.405158 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.405559 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.449729 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.449795 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.454555 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.454932 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.455274 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.455521 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.456114 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.456643 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.500203 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.500238 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.504957 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.505052 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.505289 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.505478 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.505692 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.505914 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.551046 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.551053 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.554824 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.555232 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.555661 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.555722 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.556118 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.556493 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.601635 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.601648 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.604155 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.604582 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.604954 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.605901 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.606245 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.606551 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.643813 [TEST] Crash 2
22:39:16.643884 [TEST] Disconnect 2
22:39:16.644623 [2] becomes Dead
22:39:16.644724 [2] commitChanSender done
22:39:16.648850 [2] in election timer state=Dead, bailing out
22:39:16.652333 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.652547 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.657938 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.658235 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.658543 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.702966 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.702986 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.706656 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.707194 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.708188 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.753559 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.753587 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.759762 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.760078 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.760434 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.804511 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.804526 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.810520 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.810898 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.811334 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.854933 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.854958 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.860624 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.860978 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.861430 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.905406 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.905463 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.909541 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.909961 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.910546 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.955706 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.955741 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.960827 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:16.961272 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:16.961800 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:16.995287 [TEST] Restart 2
22:39:16.996612 [2] listening at [::]:34413
22:39:16.996746 [TEST] Reconnect 2
22:39:16.999355 [2] election timer started (154ms), term=1
22:39:17.005771 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.005874 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.008499 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.008799 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.009031 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.009078 [2] ... setting commitIndex=2
22:39:17.009146 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.009394 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.009689 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:17.009838 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:17.009916 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:17.009985 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
22:39:17.010433 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.056380 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.056429 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.059073 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.059436 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.059809 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.061971 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.062300 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.062640 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.107536 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.107599 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.110205 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.110565 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.110923 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.114054 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.114371 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.114769 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.158385 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.158474 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.162131 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.162168 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.162608 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.162656 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.163144 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.163350 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.208962 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.208999 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.212649 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.213058 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.213466 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.213623 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.213981 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.214351 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.260193 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.260196 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.263014 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.263033 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.263518 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.263556 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.263966 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.264140 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.310939 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.310967 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.313809 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.314162 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.314530 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.314541 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.314923 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.315295 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.361241 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.361292 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.366184 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.366227 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.366575 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.366666 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.367049 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.367245 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.412082 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.412148 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.416903 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.417274 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.417687 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.417825 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.418134 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.418531 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.462126 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.462192 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.463851 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.464207 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.464561 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.467869 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.468259 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.468718 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.512359 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.512527 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.514202 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.514535 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.514917 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.519104 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.519513 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.519937 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.562585 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.562598 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.565441 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.565842 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.565891 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.566383 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.566441 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.566872 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.612654 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.612677 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.614523 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.614962 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.615394 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.615491 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.615821 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.616257 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.663667 [1] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.663669 [1] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.665571 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.665956 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.666395 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.666451 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:17.666860 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.667264 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3], matchIndex := map[0:2 2:2]; commitIndex := 2
22:39:17.671069 [0] becomes Dead
22:39:17.671221 [1] becomes Dead
22:39:17.671239 [0] commitChanSender done
22:39:17.671323 [1] commitChanSender done
22:39:17.671365 [2] becomes Dead
22:39:17.671478 [2] commitChanSender done
22:39:17.679270 [0] in election timer state=Dead, bailing out
22:39:17.680380 [2] in election timer state=Dead, bailing out
--- PASS: TestCrashThenRestartFollower (1.74s)
=== RUN   TestCrashThenRestartLeader
22:39:17.728568 [0] listening at [::]:41391
22:39:17.728963 [1] listening at [::]:38791
22:39:17.729293 [2] listening at [::]:38695
22:39:17.732326 [1] election timer started (176ms), term=0
22:39:17.732377 [0] election timer started (157ms), term=0
22:39:17.732458 [2] election timer started (281ms), term=0
22:39:17.892547 [0] becomes Candidate (currentTerm=1); log=[]
22:39:17.892967 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:17.892971 [0] election timer started (240ms), term=1
22:39:17.892971 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:17.896894 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:17.896940 [2] ... term out of date in RequestVote
22:39:17.896975 [2] becomes Follower with term=1; log=[]
22:39:17.897263 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:17.897488 [2] election timer started (221ms), term=1
22:39:17.898058 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:17.898112 [0] wins election with 2 votes
22:39:17.898214 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:39:17.898430 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:17.898469 [1] ... term out of date in RequestVote
22:39:17.898520 [1] becomes Follower with term=1; log=[]
22:39:17.898713 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.898719 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.898858 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:17.899185 [1] election timer started (292ms), term=1
22:39:17.899988 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:17.900041 [0] while waiting for reply, state = Leader
22:39:17.902541 [1] in election timer term changed from 0 to 1, bailing out
22:39:17.902621 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.902938 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.903139 [2] in election timer term changed from 0 to 1, bailing out
22:39:17.903344 [0] in election timer state=Leader, bailing out
22:39:17.903788 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:17.905601 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.905967 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.906610 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:17.949843 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.949852 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.953533 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.953838 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.954220 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:17.955268 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:17.955531 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:17.955884 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:18.000044 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:18.000247 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:18.001877 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:18.002132 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.002507 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:18.004645 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:18.005012 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.005433 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:18.032778 [0] Submit received by Leader: 5
22:39:18.033134 [0] ... log=[{5 1}]
22:39:18.033199 [0] Submit received by Leader: 6
22:39:18.033506 [0] ... log=[{5 1} {6 1}]
22:39:18.033565 [0] Submit received by Leader: 7
22:39:18.033884 [0] ... log=[{5 1} {6 1} {7 1}]
22:39:18.034240 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.034461 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.034462 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.034530 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.034696 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.034750 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.038942 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.039058 [1] ... inserting entries [{5 1} {6 1} {7 1}] from index 0
22:39:18.039171 [1] ... log is now: [{5 1} {6 1} {7 1}]
22:39:18.039706 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.040205 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.040344 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.040427 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:0], matchIndex := map[1:2 2:-1]; commitIndex := 2
22:39:18.040523 [0] leader sets commitIndex := 2
22:39:18.040539 [2] ... inserting entries [{5 1} {6 1} {7 1}] from index 0
22:39:18.040738 [2] ... log is now: [{5 1} {6 1} {7 1}]
22:39:18.040893 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.040905 [0] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:18.041044 [0] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.041176 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:2}
22:39:18.041221 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.041215 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:18.041485 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:18.041543 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.041601 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
22:39:18.041796 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:0], matchIndex := map[1:2 2:-1]; commitIndex := 2
22:39:18.041916 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.041981 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.042128 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.042478 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.042621 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.042865 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:18.043101 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.043504 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.043964 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.046168 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.046224 [1] ... setting commitIndex=2
22:39:18.046461 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:2}
22:39:18.046540 [2] ... setting commitIndex=2
22:39:18.046635 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.046872 [1] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:18.046953 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.047000 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:18.047061 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.047092 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:18.047191 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
22:39:18.047242 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:18.047341 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.047351 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:18.047492 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:18.047559 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
22:39:18.091817 [0] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.091864 [0] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.095460 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.095538 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.095799 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.095860 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.096182 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.096300 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.141920 [0] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.142004 [0] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.143605 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.143657 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.143984 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.143990 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.144377 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.144485 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.192193 [0] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.192195 [0] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.195110 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.195500 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.195899 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.198180 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.198562 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.198961 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.242979 [0] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.243009 [0] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.246671 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.247048 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.247478 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.249591 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.249899 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.250258 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.293049 [0] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.293107 [0] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.295822 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.296170 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.296578 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.297843 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.298195 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.298580 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.343802 [0] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.343818 [0] sending AppendEntries to 2: ni=3, args={Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.348503 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.348838 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.349204 [0] AppendEntries reply from 1 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.349362 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.349680 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.350038 [0] AppendEntries reply from 2 success: nextIndex := map[1:3 2:3], matchIndex := map[1:2 2:2]; commitIndex := 2
22:39:18.384781 [TEST] Crash 0
22:39:18.384831 [TEST] Disconnect 0
22:39:18.385371 [0] becomes Dead
22:39:18.385513 [0] commitChanSender done
22:39:18.578644 [2] becomes Candidate (currentTerm=2); log=[{5 1} {6 1} {7 1}]
22:39:18.579113 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:2 LastLogTerm:1}
22:39:18.579125 [2] election timer started (150ms), term=2
22:39:18.579218 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:2 LastLogTerm:1}
22:39:18.583099 [1] RequestVote: {Term:2 CandidateId:2 LastLogIndex:2 LastLogTerm:1} [currentTerm=1, votedFor=0, log index/term=(2, 1)]
22:39:18.583141 [1] ... term out of date in RequestVote
22:39:18.583216 [1] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:18.583610 [1] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:18.583797 [1] election timer started (189ms), term=2
22:39:18.584485 [2] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:18.584540 [2] wins election with 2 votes
22:39:18.584680 [2] becomes Leader; term=2, nextIndex=map[0:3 1:3], matchIndex=map[0:-1 1:-1]; log=[{5 1} {6 1} {7 1}]
22:39:18.585060 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.585077 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.590043 [2] in election timer state=Leader, bailing out
22:39:18.590110 [1] in election timer term changed from 1 to 2, bailing out
22:39:18.590323 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.590782 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.591524 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:-1 1:2]; commitIndex := 2
22:39:18.635401 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.635414 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.640543 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.640981 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.641420 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:-1 1:2]; commitIndex := 2
22:39:18.685571 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.685571 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.688416 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.688958 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.689411 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:-1 1:2]; commitIndex := 2
22:39:18.735807 [TEST] Restart 0
22:39:18.735995 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.736008 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.736879 [0] listening at [::]:39267
22:39:18.737027 [TEST] Reconnect 0
22:39:18.738750 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.739094 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.739409 [0] election timer started (265ms), term=1
22:39:18.739524 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:-1 1:2]; commitIndex := 2
22:39:18.786726 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.786730 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.791818 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.792356 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.792712 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:-1 1:2]; commitIndex := 2
22:39:18.793785 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.793874 [0] ... term out of date in AppendEntries
22:39:18.793973 [0] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:18.794089 [0] ... setting commitIndex=2
22:39:18.794401 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.794610 [0] election timer started (291ms), term=2
22:39:18.794684 [0] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:18.794788 [TEST] collectCommits(0) got {Command:5 Index:0 Term:2}
22:39:18.794868 [TEST] collectCommits(0) got {Command:6 Index:1 Term:2}
22:39:18.794957 [TEST] collectCommits(0) got {Command:7 Index:2 Term:2}
22:39:18.795555 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.799957 [0] in election timer term changed from 1 to 2, bailing out
22:39:18.836828 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.837089 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.838950 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.839338 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.839738 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.840744 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.841143 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.841604 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.888214 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.888225 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.892166 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.892478 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.892802 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.893850 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.894109 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.894327 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.938191 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.938191 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.940935 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.941278 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.941583 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.944744 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.945092 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.945417 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.988918 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.989035 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.992737 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.993087 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.993454 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:18.993628 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:18.994010 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:18.994365 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.039123 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.039152 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.041398 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.041818 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.042215 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.043279 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.043657 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.044022 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.090211 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.090221 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.092154 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.092554 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.092997 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.095065 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.095444 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.095846 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.140370 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.140387 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.145041 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.145404 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.145778 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.146873 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.147262 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.147662 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.190508 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.190515 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.193496 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.193833 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.194159 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.194296 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.194465 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.194822 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.240596 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.240650 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.243389 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.243768 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.244167 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.246241 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.246600 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.246993 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.291688 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.291701 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.295386 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.295761 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.296133 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.297150 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.297465 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.297824 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.311960 [0] becomes Dead
22:39:19.312138 [0] commitChanSender done
22:39:19.312139 [1] becomes Dead
22:39:19.312268 [1] commitChanSender done
22:39:19.312385 [2] becomes Dead
22:39:19.312458 [2] commitChanSender done
22:39:19.314191 [1] in election timer state=Dead, bailing out
22:39:19.315403 [0] in election timer state=Dead, bailing out
--- PASS: TestCrashThenRestartLeader (1.64s)
=== RUN   TestCrashThenRestartAll
22:39:19.367970 [0] listening at [::]:32857
22:39:19.368347 [1] listening at [::]:45647
22:39:19.368700 [2] listening at [::]:40449
22:39:19.371918 [2] election timer started (170ms), term=0
22:39:19.372011 [1] election timer started (267ms), term=0
22:39:19.372095 [0] election timer started (254ms), term=0
22:39:19.542863 [2] becomes Candidate (currentTerm=1); log=[]
22:39:19.543280 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:19.543298 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:19.543282 [2] election timer started (187ms), term=1
22:39:19.546934 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:19.546991 [0] ... term out of date in RequestVote
22:39:19.546990 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:19.547030 [0] becomes Follower with term=1; log=[]
22:39:19.547064 [1] ... term out of date in RequestVote
22:39:19.547130 [1] becomes Follower with term=1; log=[]
22:39:19.547462 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:19.547467 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:19.547710 [0] election timer started (283ms), term=1
22:39:19.547733 [1] election timer started (187ms), term=1
22:39:19.548404 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:19.548481 [2] wins election with 2 votes
22:39:19.548587 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
22:39:19.548762 [2] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:19.548808 [2] while waiting for reply, state = Leader
22:39:19.549006 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.549028 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.551067 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.551312 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.551810 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:19.552037 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.552312 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.552620 [1] in election timer term changed from 0 to 1, bailing out
22:39:19.552737 [0] in election timer term changed from 0 to 1, bailing out
22:39:19.552827 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:19.553854 [2] in election timer state=Leader, bailing out
22:39:19.600225 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.600256 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.602846 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.603186 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.603587 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:19.605832 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.606137 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.606493 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:19.651264 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.651271 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.654932 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.655224 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.655643 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:19.655818 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:19.656069 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.656459 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]; commitIndex := -1
22:39:19.674105 [2] Submit received by Leader: 5
22:39:19.674451 [2] ... log=[{5 1}]
22:39:19.674526 [2] Submit received by Leader: 6
22:39:19.674769 [2] ... log=[{5 1} {6 1}]
22:39:19.674827 [2] Submit received by Leader: 7
22:39:19.675078 [2] ... log=[{5 1} {6 1} {7 1}]
22:39:19.675378 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.675557 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.675664 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.675578 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.675761 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.675780 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.678801 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.678899 [0] ... inserting entries [{5 1} {6 1} {7 1}] from index 0
22:39:19.678971 [0] ... log is now: [{5 1} {6 1} {7 1}]
22:39:19.679318 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.679583 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.679684 [1] ... inserting entries [{5 1} {6 1} {7 1}] from index 0
22:39:19.679690 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:0], matchIndex := map[0:2 1:-1]; commitIndex := 2
22:39:19.679765 [1] ... log is now: [{5 1} {6 1} {7 1}]
22:39:19.679601 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.679788 [2] leader sets commitIndex := 2
22:39:19.680224 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.680301 [2] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:19.680316 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.680382 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.680424 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:19.680498 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:2}
22:39:19.680536 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:19.680735 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.680776 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
22:39:19.680764 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.680819 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.680979 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.681187 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.681242 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.681504 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.681612 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.681753 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:-1}
22:39:19.682091 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.682417 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.686709 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1} {Command:7 Term:1}] LeaderCommit:2}
22:39:19.686771 [1] ... setting commitIndex=2
22:39:19.686778 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.686868 [0] ... setting commitIndex=2
22:39:19.687230 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.687269 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.687614 [1] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:19.687642 [0] commitChanSender entries=[{5 1} {6 1} {7 1}], savedLastApplied=-1
22:39:19.687852 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.687873 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:19.688154 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:19.688175 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.688281 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
22:39:19.688388 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:19.688478 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:19.688549 [TEST] collectCommits(0) got {Command:7 Index:2 Term:1}
22:39:19.731389 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.731394 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.735431 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.735791 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.736128 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.738293 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.738618 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.739045 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.781957 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.781985 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.784467 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.784798 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.785146 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.788391 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.788756 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.789211 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.832954 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.832968 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.838833 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.838913 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.839294 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.839341 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.839736 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.839929 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.884021 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.884066 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.886669 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.886944 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.887240 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.890519 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.890768 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.891040 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.934259 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.934333 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.937906 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.938240 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.938658 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.939869 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.940236 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.940573 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.985398 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.985416 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.987981 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.988075 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
22:39:19.988314 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.988460 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:19.988770 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:19.988935 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := 2
22:39:20.026548 [TEST] Crash 2
22:39:20.026605 [TEST] Disconnect 2
22:39:20.027146 [2] becomes Dead
22:39:20.027297 [2] commitChanSender done
22:39:20.027304 [TEST] Crash 0
22:39:20.027421 [TEST] Disconnect 0
22:39:20.027731 [0] becomes Dead
22:39:20.027861 [0] commitChanSender done
22:39:20.027887 [TEST] Crash 1
22:39:20.027953 [TEST] Disconnect 1
22:39:20.027866 [0] in election timer state=Dead, bailing out
22:39:20.028003 [1] becomes Dead
22:39:20.028082 [1] commitChanSender done
22:39:20.038794 [1] in election timer state=Dead, bailing out
22:39:20.378538 [TEST] Restart 2
22:39:20.379609 [2] listening at [::]:41855
22:39:20.379735 [TEST] Reconnect 2
22:39:20.379890 [2] election timer started (256ms), term=1
22:39:20.400511 [TEST] Restart 0
22:39:20.401554 [0] listening at [::]:34297
22:39:20.401694 [TEST] Reconnect 0
22:39:20.403136 [0] election timer started (234ms), term=1
22:39:20.423618 [TEST] Restart 1
22:39:20.424929 [1] listening at [::]:35525
22:39:20.425082 [TEST] Reconnect 1
22:39:20.429042 [1] election timer started (201ms), term=1
22:39:20.639748 [1] becomes Candidate (currentTerm=2); log=[{5 1} {6 1} {7 1}]
22:39:20.640114 [2] becomes Candidate (currentTerm=2); log=[{5 1} {6 1} {7 1}]
22:39:20.640161 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:2 LastLogTerm:1}
22:39:20.640175 [1] election timer started (243ms), term=2
22:39:20.640189 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:2 LastLogTerm:1}
22:39:20.640506 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:2 LastLogTerm:1}
22:39:20.640513 [2] election timer started (153ms), term=2
22:39:20.640528 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:2 LastLogTerm:1}
22:39:20.643264 [0] RequestVote: {Term:2 CandidateId:2 LastLogIndex:2 LastLogTerm:1} [currentTerm=1, votedFor=2, log index/term=(2, 1)]
22:39:20.643316 [0] ... term out of date in RequestVote
22:39:20.643387 [0] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:20.643724 [2] RequestVote: {Term:2 CandidateId:1 LastLogIndex:2 LastLogTerm:1} [currentTerm=2, votedFor=2, log index/term=(2, 1)]
22:39:20.643843 [0] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:20.644040 [0] in election timer term changed from 1 to 2, bailing out
22:39:20.644058 [0] election timer started (280ms), term=2
22:39:20.644055 [1] RequestVote: {Term:2 CandidateId:2 LastLogIndex:2 LastLogTerm:1} [currentTerm=2, votedFor=1, log index/term=(2, 1)]
22:39:20.644159 [2] ... RequestVote reply: &{Term:2 VoteGranted:false}
22:39:20.644512 [1] ... RequestVote reply: &{Term:2 VoteGranted:false}
22:39:20.644900 [2] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:20.644970 [2] wins election with 2 votes
22:39:20.645155 [2] becomes Leader; term=2, nextIndex=map[0:3 1:3], matchIndex=map[0:-1 1:-1]; log=[{5 1} {6 1} {7 1}]
22:39:20.645203 [1] received RequestVoteReply {Term:2 VoteGranted:false}
22:39:20.645587 [2] received RequestVoteReply {Term:2 VoteGranted:false}
22:39:20.645617 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.645649 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.645637 [2] while waiting for reply, state = Leader
22:39:20.646582 [0] RequestVote: {Term:2 CandidateId:1 LastLogIndex:2 LastLogTerm:1} [currentTerm=2, votedFor=2, log index/term=(2, 1)]
22:39:20.646896 [0] ... RequestVote reply: &{Term:2 VoteGranted:false}
22:39:20.647684 [1] received RequestVoteReply {Term:2 VoteGranted:false}
22:39:20.650546 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.650865 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.651147 [2] in election timer state=Leader, bailing out
22:39:20.651384 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:-1]; commitIndex := -1
22:39:20.652351 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.652464 [1] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
22:39:20.652901 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.653020 [1] election timer started (161ms), term=2
22:39:20.653470 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
22:39:20.696328 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.696401 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.700564 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.701024 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.701511 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
22:39:20.702482 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.702835 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.703285 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
22:39:20.746824 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.746841 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.748632 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.748965 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.749290 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
22:39:20.750354 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:20.750671 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.750859 [2] Submit received by Leader: 8
22:39:20.751290 [2] ... log=[{5 1} {6 1} {7 1} {8 2}]
22:39:20.751499 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]; commitIndex := -1
22:39:20.751691 [2] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:-1}
22:39:20.751809 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:-1}
22:39:20.756543 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:-1}
22:39:20.756611 [0] ... inserting entries [{8 2}] from index 3
22:39:20.756685 [0] ... log is now: [{5 1} {6 1} {7 1} {8 2}]
22:39:20.756999 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.757335 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:3], matchIndex := map[0:3 1:2]; commitIndex := 3
22:39:20.757385 [2] leader sets commitIndex := 3
22:39:20.757466 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:-1}
22:39:20.757563 [1] ... inserting entries [{8 2}] from index 3
22:39:20.757590 [2] commitChanSender entries=[{5 1} {6 1} {7 1} {8 2}], savedLastApplied=-1
22:39:20.757660 [1] ... log is now: [{5 1} {6 1} {7 1} {8 2}]
22:39:20.757703 [TEST] collectCommits(2) got {Command:5 Index:0 Term:2}
22:39:20.757768 [2] sending AppendEntries to 0: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.757823 [TEST] collectCommits(2) got {Command:6 Index:1 Term:2}
22:39:20.757955 [TEST] collectCommits(2) got {Command:7 Index:2 Term:2}
22:39:20.757825 [2] sending AppendEntries to 1: ni=3, args={Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:3}
22:39:20.758046 [TEST] collectCommits(2) got {Command:8 Index:3 Term:2}
22:39:20.758189 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.758538 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.760703 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:3}
22:39:20.760752 [1] ... setting commitIndex=3
22:39:20.761042 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.761325 [1] commitChanSender entries=[{5 1} {6 1} {7 1} {8 2}], savedLastApplied=-1
22:39:20.761336 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.761476 [TEST] collectCommits(1) got {Command:5 Index:0 Term:2}
22:39:20.761538 [TEST] collectCommits(1) got {Command:6 Index:1 Term:2}
22:39:20.761598 [TEST] collectCommits(1) got {Command:7 Index:2 Term:2}
22:39:20.761654 [TEST] collectCommits(1) got {Command:8 Index:3 Term:2}
22:39:20.763455 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.763506 [0] ... setting commitIndex=3
22:39:20.763871 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.764192 [0] commitChanSender entries=[{5 1} {6 1} {7 1} {8 2}], savedLastApplied=-1
22:39:20.764232 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.764271 [TEST] collectCommits(0) got {Command:5 Index:0 Term:2}
22:39:20.764348 [TEST] collectCommits(0) got {Command:6 Index:1 Term:2}
22:39:20.764397 [TEST] collectCommits(0) got {Command:7 Index:2 Term:2}
22:39:20.764448 [TEST] collectCommits(0) got {Command:8 Index:3 Term:2}
22:39:20.808122 [2] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.808131 [2] sending AppendEntries to 0: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.812800 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.812878 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.813165 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.813267 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.813575 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.813720 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.858346 [2] sending AppendEntries to 0: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.858349 [2] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.860293 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.860686 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.861040 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.861249 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.861638 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.861989 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.908940 [2] sending AppendEntries to 0: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.909036 [2] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.912878 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.913464 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.914098 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.915090 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.915686 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.916097 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.959312 [2] sending AppendEntries to 0: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.959390 [2] sending AppendEntries to 1: ni=4, args={Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.961902 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.962272 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.962528 [2] AppendEntries reply from 0 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:20.964725 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
22:39:20.965030 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:20.965314 [2] AppendEntries reply from 1 success: nextIndex := map[0:4 1:4], matchIndex := map[0:3 1:3]; commitIndex := 3
22:39:21.002743 [0] becomes Dead
22:39:21.002852 [0] commitChanSender done
22:39:21.002911 [1] becomes Dead
22:39:21.003050 [1] commitChanSender done
22:39:21.003062 [2] becomes Dead
22:39:21.003156 [1] in election timer state=Dead, bailing out
22:39:21.003169 [2] commitChanSender done
22:39:21.005132 [0] in election timer state=Dead, bailing out
22:39:21.010680 [1] in election timer state=Dead, bailing out
--- PASS: TestCrashThenRestartAll (1.69s)
=== RUN   TestReplaceMultipleLogEntries
22:39:21.057320 [0] listening at [::]:40507
22:39:21.057708 [1] listening at [::]:41513
22:39:21.058112 [2] listening at [::]:40799
22:39:21.062044 [1] election timer started (287ms), term=0
22:39:21.062100 [0] election timer started (177ms), term=0
22:39:21.062168 [2] election timer started (176ms), term=0
22:39:21.242350 [2] becomes Candidate (currentTerm=1); log=[]
22:39:21.242409 [0] becomes Candidate (currentTerm=1); log=[]
22:39:21.242800 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:21.242879 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
22:39:21.242922 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:21.242818 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
22:39:21.242802 [2] election timer started (163ms), term=1
22:39:21.242813 [0] election timer started (294ms), term=1
22:39:21.245966 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:21.246022 [1] ... term out of date in RequestVote
22:39:21.246064 [1] becomes Follower with term=1; log=[]
22:39:21.246420 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:21.246536 [1] election timer started (155ms), term=1
22:39:21.247420 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
22:39:21.247702 [0] ... RequestVote reply: &{Term:1 VoteGranted:false}
22:39:21.247887 [0] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:21.247890 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
22:39:21.247960 [0] wins election with 2 votes
22:39:21.247894 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
22:39:21.248149 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
22:39:21.248230 [2] ... RequestVote reply: &{Term:1 VoteGranted:false}
22:39:21.248424 [1] ... RequestVote reply: &{Term:1 VoteGranted:false}
22:39:21.248677 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.248726 [2] received RequestVoteReply {Term:1 VoteGranted:false}
22:39:21.248741 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.249347 [0] received RequestVoteReply {Term:1 VoteGranted:false}
22:39:21.249455 [0] while waiting for reply, state = Leader
22:39:21.249597 [2] received RequestVoteReply {Term:1 VoteGranted:false}
22:39:21.252604 [1] in election timer term changed from 0 to 1, bailing out
22:39:21.253796 [0] in election timer state=Leader, bailing out
22:39:21.253933 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.253998 [2] becomes Follower with term=1; log=[]
22:39:21.254381 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.254644 [2] election timer started (274ms), term=1
22:39:21.254831 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.254995 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:21.255178 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.255735 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:21.298872 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.298927 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.301744 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.302065 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.302492 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:21.302547 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.302829 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.303182 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:21.349539 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.349573 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.351375 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.351668 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.352027 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:21.354226 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:21.354539 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.354925 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]; commitIndex := -1
22:39:21.363972 [0] Submit received by Leader: 5
22:39:21.364359 [0] ... log=[{5 1}]
22:39:21.364415 [0] Submit received by Leader: 6
22:39:21.364689 [0] ... log=[{5 1} {6 1}]
22:39:21.365000 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.365132 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.365183 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.365204 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.366828 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.366895 [1] ... inserting entries [{5 1} {6 1}] from index 0
22:39:21.366951 [1] ... log is now: [{5 1} {6 1}]
22:39:21.367252 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.367616 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:0], matchIndex := map[1:1 2:-1]; commitIndex := 1
22:39:21.367672 [0] leader sets commitIndex := 1
22:39:21.367924 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:21.367943 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.368046 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.368100 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:1}
22:39:21.368050 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
22:39:21.368297 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
22:39:21.368468 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.368826 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:0], matchIndex := map[1:1 2:-1]; commitIndex := 1
22:39:21.371028 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.371045 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.371093 [1] ... setting commitIndex=1
22:39:21.371163 [2] ... inserting entries [{5 1} {6 1}] from index 0
22:39:21.371263 [2] ... log is now: [{5 1} {6 1}]
22:39:21.371588 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.371662 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.371864 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:21.371962 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
22:39:21.372021 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
22:39:21.372046 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:0], matchIndex := map[1:1 2:-1]; commitIndex := 1
22:39:21.372124 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
22:39:21.372213 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.372382 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.372717 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.373832 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:1}
22:39:21.373885 [2] ... setting commitIndex=1
22:39:21.374218 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.374429 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
22:39:21.374524 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
22:39:21.374560 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.374595 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
22:39:21.418748 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.418750 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.424633 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.424676 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.425192 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.425348 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.425872 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.426118 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.469755 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.469758 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.475707 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.475737 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.476171 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.476266 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.476556 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.476707 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.520633 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.520641 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.523415 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.523854 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.524363 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.525409 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.525778 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.526178 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.571331 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.571365 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.574012 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.574343 [1] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.574715 [0] AppendEntries reply from 1 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.576853 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.577125 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.577473 [0] AppendEntries reply from 2 success: nextIndex := map[1:2 2:2], matchIndex := map[1:1 2:1]; commitIndex := 1
22:39:21.615353 [TEST] Disconnect 0
22:39:21.621666 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.621684 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.625953 [0] Submit received by Leader: 21
22:39:21.626295 [0] ... log=[{5 1} {6 1} {21 1}]
22:39:21.626604 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1}] LeaderCommit:1}
22:39:21.626639 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1}] LeaderCommit:1}
22:39:21.631599 [0] Submit received by Leader: 22
22:39:21.631970 [0] ... log=[{5 1} {6 1} {21 1} {22 1}]
22:39:21.632227 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1}] LeaderCommit:1}
22:39:21.632279 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1}] LeaderCommit:1}
22:39:21.637190 [0] Submit received by Leader: 23
22:39:21.637535 [0] ... log=[{5 1} {6 1} {21 1} {22 1} {23 1}]
22:39:21.637835 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1}] LeaderCommit:1}
22:39:21.637835 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1}] LeaderCommit:1}
22:39:21.642752 [0] Submit received by Leader: 24
22:39:21.643117 [0] ... log=[{5 1} {6 1} {21 1} {22 1} {23 1} {24 1}]
22:39:21.643513 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.643517 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.693561 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.693590 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.737684 [1] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
22:39:21.738077 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
22:39:21.738101 [1] election timer started (176ms), term=2
22:39:21.738112 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
22:39:21.741476 [2] RequestVote: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=-1, log index/term=(1, 1)]
22:39:21.741541 [2] ... term out of date in RequestVote
22:39:21.741604 [2] becomes Follower with term=2; log=[{5 1} {6 1}]
22:39:21.742036 [2] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:21.742292 [2] election timer started (184ms), term=2
22:39:21.743055 [1] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:21.743118 [1] wins election with 2 votes
22:39:21.743288 [1] becomes Leader; term=2, nextIndex=map[0:2 2:2], matchIndex=map[0:-1 2:-1]; log=[{5 1} {6 1}]
22:39:21.743525 [2] in election timer term changed from 1 to 2, bailing out
22:39:21.743749 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.743763 [1] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.743905 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.743938 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.745403 [2] in election timer term changed from 1 to 2, bailing out
22:39:21.748684 [1] in election timer state=Leader, bailing out
22:39:21.749840 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.750159 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.750605 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:-1 2:1]; commitIndex := 1
22:39:21.794799 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.794811 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.794888 [1] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.794877 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.798645 [1] Submit received by Leader: 8
22:39:21.799076 [1] ... log=[{5 1} {6 1} {8 2}]
22:39:21.799395 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:21.799420 [1] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:21.800884 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
22:39:21.801223 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.801571 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:-1 2:1]; commitIndex := 1
22:39:21.803782 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
22:39:21.803841 [2] ... inserting entries [{8 2}] from index 2
22:39:21.803892 [2] ... log is now: [{5 1} {6 1} {8 2}]
22:39:21.804212 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.804411 [1] Submit received by Leader: 9
22:39:21.804732 [1] ... log=[{5 1} {6 1} {8 2} {9 2}]
22:39:21.804893 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:3], matchIndex := map[0:-1 2:2]; commitIndex := 2
22:39:21.804951 [1] leader sets commitIndex := 2
22:39:21.805065 [1] commitChanSender entries=[{8 2}], savedLastApplied=1
22:39:21.805173 [TEST] collectCommits(1) got {Command:8 Index:2 Term:2}
22:39:21.805315 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2}] LeaderCommit:2}
22:39:21.805364 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:21.805328 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2}] LeaderCommit:2}
22:39:21.805399 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:21.809208 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:21.809291 [2] ... inserting entries [{9 2}] from index 3
22:39:21.809368 [2] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
22:39:21.809412 [2] ... setting commitIndex=2
22:39:21.809772 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.809911 [1] Submit received by Leader: 10
22:39:21.809938 [2] commitChanSender entries=[{8 2}], savedLastApplied=1
22:39:21.810142 [TEST] collectCommits(2) got {Command:8 Index:2 Term:2}
22:39:21.810366 [1] ... log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
22:39:21.810502 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:4], matchIndex := map[0:-1 2:3]; commitIndex := 3
22:39:21.810539 [1] leader sets commitIndex := 3
22:39:21.810623 [1] commitChanSender entries=[{9 2}], savedLastApplied=2
22:39:21.810694 [TEST] collectCommits(1) got {Command:9 Index:3 Term:2}
22:39:21.810927 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:3}
22:39:21.810932 [1] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[{Command:10 Term:2}] LeaderCommit:3}
22:39:21.811073 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:3}
22:39:21.811119 [1] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[{Command:10 Term:2}] LeaderCommit:3}
22:39:21.811188 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
22:39:21.811572 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.811910 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:4], matchIndex := map[0:-1 2:3]; commitIndex := 3
22:39:21.814134 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[{Command:10 Term:2}] LeaderCommit:3}
22:39:21.814194 [2] ... inserting entries [{10 2}] from index 4
22:39:21.814271 [2] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2}]
22:39:21.814296 [2] ... setting commitIndex=3
22:39:21.814615 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.814789 [2] commitChanSender entries=[{9 2}], savedLastApplied=2
22:39:21.814850 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[{Command:10 Term:2}] LeaderCommit:3}
22:39:21.814873 [TEST] collectCommits(2) got {Command:9 Index:3 Term:2}
22:39:21.814935 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:-1 2:4]; commitIndex := 4
22:39:21.814986 [1] leader sets commitIndex := 4
22:39:21.815071 [1] commitChanSender entries=[{10 2}], savedLastApplied=3
22:39:21.815146 [TEST] collectCommits(1) got {Command:10 Index:4 Term:2}
22:39:21.815198 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.815310 [1] sending AppendEntries to 2: ni=5, args={Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.815346 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:4}
22:39:21.815581 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:-1 2:4]; commitIndex := 4
22:39:21.818910 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.818959 [2] ... setting commitIndex=4
22:39:21.819359 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.819535 [2] commitChanSender entries=[{10 2}], savedLastApplied=3
22:39:21.819623 [TEST] collectCommits(2) got {Command:10 Index:4 Term:2}
22:39:21.819675 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:-1 2:4]; commitIndex := 4
22:39:21.845828 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.845838 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.865570 [1] sending AppendEntries to 2: ni=5, args={Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.865575 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:4}
22:39:21.868145 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.868530 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.868904 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:-1 2:4]; commitIndex := 4
22:39:21.896271 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.896288 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.916176 [1] sending AppendEntries to 2: ni=5, args={Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.916244 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:4}
22:39:21.920800 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.921159 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.921516 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:-1 2:4]; commitIndex := 4
22:39:21.947215 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.947216 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.966231 [1] sending AppendEntries to 2: ni=5, args={Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.966469 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:4}
22:39:21.969908 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:21.970388 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:21.970781 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:-1 2:4]; commitIndex := 4
22:39:21.997945 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:21.998247 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.016835 [1] sending AppendEntries to 2: ni=5, args={Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.016859 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:4}
22:39:22.018669 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.019076 [2] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.019454 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:-1 2:4]; commitIndex := 4
22:39:22.048429 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.048468 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.060903 [TEST] Crash 1
22:39:22.060938 [TEST] Disconnect 1
22:39:22.061262 [1] becomes Dead
22:39:22.061321 [1] commitChanSender done
22:39:22.099512 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.099731 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.122338 [TEST] Restart 1
22:39:22.123221 [1] listening at [::]:35479
22:39:22.123327 [TEST] Reconnect 1
22:39:22.125806 [1] election timer started (159ms), term=2
22:39:22.150285 [0] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.150311 [0] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.155823 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:21 Term:1} {Command:22 Term:1} {Command:23 Term:1} {Command:24 Term:1}] LeaderCommit:1}
22:39:22.156634 [1] AppendEntries reply: {Term:2 Success:false ConflictIndex:0 ConflictTerm:0}
22:39:22.157959 [0] term out of date in heartbeat reply
22:39:22.158120 [0] becomes Follower with term=2; log=[{5 1} {6 1} {21 1} {22 1} {23 1} {24 1}]
22:39:22.158412 [0] election timer started (166ms), term=2
22:39:22.203019 [2] becomes Candidate (currentTerm=3); log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
22:39:22.203373 [2] election timer started (165ms), term=3
22:39:22.203376 [2] sending RequestVote to 1: {Term:3 CandidateId:2 LastLogIndex:4 LastLogTerm:2}
22:39:22.203486 [2] sending RequestVote to 0: {Term:3 CandidateId:2 LastLogIndex:4 LastLogTerm:2}
22:39:22.210097 [1] RequestVote: {Term:3 CandidateId:2 LastLogIndex:4 LastLogTerm:2} [currentTerm=2, votedFor=1, log index/term=(4, 2)]
22:39:22.210151 [1] ... term out of date in RequestVote
22:39:22.210254 [1] becomes Follower with term=3; log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
22:39:22.210691 [1] ... RequestVote reply: &{Term:3 VoteGranted:true}
22:39:22.210867 [1] election timer started (196ms), term=3
22:39:22.211565 [2] received RequestVoteReply {Term:3 VoteGranted:true}
22:39:22.211628 [2] wins election with 2 votes
22:39:22.211805 [2] becomes Leader; term=3, nextIndex=map[0:5 1:5], matchIndex=map[0:-1 1:-1]; log=[{5 1} {6 1} {8 2} {9 2} {10 2}]
22:39:22.212239 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.212263 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.213746 [2] in election timer state=Leader, bailing out
22:39:22.215004 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.215065 [1] ... setting commitIndex=4
22:39:22.215480 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.215822 [1] commitChanSender entries=[{5 1} {6 1} {8 2} {9 2} {10 2}], savedLastApplied=-1
22:39:22.215920 [TEST] collectCommits(1) got {Command:5 Index:0 Term:3}
22:39:22.215986 [TEST] collectCommits(1) got {Command:6 Index:1 Term:3}
22:39:22.216004 [1] in election timer term changed from 2 to 3, bailing out
22:39:22.216023 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:5], matchIndex := map[0:-1 1:4]; commitIndex := 4
22:39:22.216082 [TEST] collectCommits(1) got {Command:8 Index:2 Term:3}
22:39:22.216220 [TEST] collectCommits(1) got {Command:9 Index:3 Term:3}
22:39:22.216287 [TEST] collectCommits(1) got {Command:10 Index:4 Term:3}
22:39:22.247438 [TEST] Reconnect 0
22:39:22.263240 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.263244 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.266730 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.266778 [0] ... term out of date in AppendEntries
22:39:22.266864 [0] becomes Follower with term=3; log=[{5 1} {6 1} {21 1} {22 1} {23 1} {24 1}]
22:39:22.267338 [0] AppendEntries reply: {Term:3 Success:false ConflictIndex:0 ConflictTerm:1}
22:39:22.267458 [0] election timer started (278ms), term=3
22:39:22.268186 [2] AppendEntries reply from 0 !success: nextIndex := 4
22:39:22.268834 [0] in election timer term changed from 2 to 3, bailing out
22:39:22.268914 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.269254 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.269610 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:5], matchIndex := map[0:-1 1:4]; commitIndex := 4
22:39:22.314268 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.314330 [2] sending AppendEntries to 0: ni=2, args={Term:3 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:4}
22:39:22.315982 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.316582 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.316962 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:5], matchIndex := map[0:-1 1:4]; commitIndex := 4
22:39:22.319131 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2} {Command:9 Term:2} {Command:10 Term:2}] LeaderCommit:4}
22:39:22.319219 [0] ... inserting entries [{8 2} {9 2} {10 2}] from index 2
22:39:22.319293 [0] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2}]
22:39:22.319331 [0] ... setting commitIndex=4
22:39:22.319689 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.319952 [0] commitChanSender entries=[{8 2} {9 2} {10 2}], savedLastApplied=1
22:39:22.320036 [TEST] collectCommits(0) got {Command:8 Index:2 Term:3}
22:39:22.320036 [2] AppendEntries reply from 0 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.320113 [TEST] collectCommits(0) got {Command:9 Index:3 Term:3}
22:39:22.320289 [TEST] collectCommits(0) got {Command:10 Index:4 Term:3}
22:39:22.364371 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.364437 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.366180 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.366199 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.366628 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.366635 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.367000 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.367173 [2] AppendEntries reply from 0 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.415230 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.415264 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.418749 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.419116 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.419532 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.420484 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.420852 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.421263 [2] AppendEntries reply from 0 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.465530 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.465539 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.469266 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.469676 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.470052 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.470207 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.470618 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.471086 [2] AppendEntries reply from 0 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.516686 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.516686 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.520623 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.521012 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.521399 [2] AppendEntries reply from 0 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.522522 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.522908 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.523318 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.567133 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.567136 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.571010 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.571540 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.572038 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.572143 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.572480 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.572923 [2] AppendEntries reply from 0 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.618008 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.618030 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.623104 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.623594 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.624029 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[] LeaderCommit:4}
22:39:22.624139 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.624541 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.625018 [2] AppendEntries reply from 0 success: nextIndex := map[0:5 1:5], matchIndex := map[0:4 1:4]; commitIndex := 4
22:39:22.649525 [2] Submit received by Leader: 11
22:39:22.650010 [2] ... log=[{5 1} {6 1} {8 2} {9 2} {10 2} {11 3}]
22:39:22.650411 [2] sending AppendEntries to 1: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[{Command:11 Term:3}] LeaderCommit:4}
22:39:22.650414 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[{Command:11 Term:3}] LeaderCommit:4}
22:39:22.653046 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[{Command:11 Term:3}] LeaderCommit:4}
22:39:22.653116 [1] ... inserting entries [{11 3}] from index 5
22:39:22.653211 [1] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2} {11 3}]
22:39:22.653551 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.653890 [2] AppendEntries reply from 1 success: nextIndex := map[0:5 1:6], matchIndex := map[0:4 1:5]; commitIndex := 5
22:39:22.653933 [2] leader sets commitIndex := 5
22:39:22.654068 [2] commitChanSender entries=[{11 3}], savedLastApplied=4
22:39:22.654174 [TEST] collectCommits(2) got {Command:11 Index:5 Term:3}
22:39:22.654291 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[{Command:11 Term:3}] LeaderCommit:4}
22:39:22.654396 [2] sending AppendEntries to 1: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.654500 [0] ... inserting entries [{11 3}] from index 5
22:39:22.654576 [2] sending AppendEntries to 0: ni=5, args={Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[{Command:11 Term:3}] LeaderCommit:5}
22:39:22.654707 [0] ... log is now: [{5 1} {6 1} {8 2} {9 2} {10 2} {11 3}]
22:39:22.655334 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.655923 [2] AppendEntries reply from 0 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.660377 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.660430 [1] ... setting commitIndex=5
22:39:22.660934 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:4 PrevLogTerm:2 Entries:[{Command:11 Term:3}] LeaderCommit:5}
22:39:22.661071 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.661101 [0] ... setting commitIndex=5
22:39:22.661357 [1] commitChanSender entries=[{11 3}], savedLastApplied=4
22:39:22.661566 [TEST] collectCommits(1) got {Command:11 Index:5 Term:3}
22:39:22.661603 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.661655 [2] AppendEntries reply from 1 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.661741 [0] commitChanSender entries=[{11 3}], savedLastApplied=4
22:39:22.661829 [TEST] collectCommits(0) got {Command:11 Index:5 Term:3}
22:39:22.662093 [2] AppendEntries reply from 0 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.704690 [2] sending AppendEntries to 1: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.704693 [2] sending AppendEntries to 0: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.706431 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.706822 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.707192 [2] AppendEntries reply from 1 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.709302 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.709697 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.710124 [2] AppendEntries reply from 0 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.755227 [2] sending AppendEntries to 1: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.755237 [2] sending AppendEntries to 0: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.756937 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.757352 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.757782 [2] AppendEntries reply from 1 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.761886 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.762291 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.762759 [2] AppendEntries reply from 0 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.806085 [2] sending AppendEntries to 1: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.806103 [2] sending AppendEntries to 0: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.811084 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.811560 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.811894 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.812020 [2] AppendEntries reply from 0 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.812289 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.812678 [2] AppendEntries reply from 1 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.856858 [2] sending AppendEntries to 0: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.856882 [2] sending AppendEntries to 1: ni=6, args={Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.858564 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.859002 [1] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.859441 [2] AppendEntries reply from 1 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.861537 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:5 PrevLogTerm:3 Entries:[] LeaderCommit:5}
22:39:22.861929 [0] AppendEntries reply: {Term:3 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:22.862408 [2] AppendEntries reply from 0 success: nextIndex := map[0:6 1:6], matchIndex := map[0:5 1:5]; commitIndex := 5
22:39:22.900872 [0] becomes Dead
22:39:22.900969 [0] commitChanSender done
22:39:22.901029 [1] becomes Dead
22:39:22.901100 [1] commitChanSender done
22:39:22.901241 [2] becomes Dead
22:39:22.901306 [2] commitChanSender done
--- PASS: TestReplaceMultipleLogEntries (1.84s)
=== RUN   TestCrashAfterSubmit
22:39:22.902233 [0] listening at [::]:44145
22:39:22.902632 [1] listening at [::]:41555
22:39:22.902988 [2] listening at [::]:38523
22:39:22.906861 [2] election timer started (161ms), term=0
22:39:22.906873 [1] election timer started (156ms), term=0
22:39:22.906991 [0] election timer started (224ms), term=0
22:39:22.907774 [0] in election timer state=Dead, bailing out
22:39:22.912036 [1] in election timer state=Dead, bailing out
22:39:23.067885 [1] becomes Candidate (currentTerm=1); log=[]
22:39:23.068384 [1] election timer started (194ms), term=1
22:39:23.068401 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:23.068521 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
22:39:23.074821 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:23.074898 [0] ... term out of date in RequestVote
22:39:23.074948 [0] becomes Follower with term=1; log=[]
22:39:23.074833 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
22:39:23.075103 [2] ... term out of date in RequestVote
22:39:23.075154 [2] becomes Follower with term=1; log=[]
22:39:23.075411 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:23.075579 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
22:39:23.075617 [0] election timer started (272ms), term=1
22:39:23.075717 [2] election timer started (231ms), term=1
22:39:23.076307 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:23.076383 [1] wins election with 2 votes
22:39:23.076506 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
22:39:23.076682 [1] received RequestVoteReply {Term:1 VoteGranted:true}
22:39:23.076741 [1] while waiting for reply, state = Leader
22:39:23.076964 [2] in election timer term changed from 0 to 1, bailing out
22:39:23.077051 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.077099 [0] in election timer term changed from 0 to 1, bailing out
22:39:23.077161 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.078737 [1] in election timer state=Leader, bailing out
22:39:23.084019 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.084179 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.084311 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.084619 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.084917 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:23.085138 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:23.128228 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.128303 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.129981 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.130336 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.130685 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:23.134824 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.135025 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.135427 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:23.179084 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.179485 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.181068 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.181365 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.181720 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:23.184813 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
22:39:23.185014 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.185296 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]; commitIndex := -1
22:39:23.207971 [1] Submit received by Leader: 5
22:39:23.208345 [1] ... log=[{5 1}]
22:39:23.208673 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:23.208748 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:23.210087 [TEST] Crash 1
22:39:23.210143 [TEST] Disconnect 1
22:39:23.210590 [1] becomes Dead
22:39:23.210682 [1] commitChanSender done
22:39:23.215003 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:23.215002 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1}] LeaderCommit:-1}
22:39:23.215135 [2] ... inserting entries [{5 1}] from index 0
22:39:23.215189 [0] ... inserting entries [{5 1}] from index 0
22:39:23.215243 [2] ... log is now: [{5 1}]
22:39:23.215319 [0] ... log is now: [{5 1}]
22:39:23.215829 [0] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.215829 [2] AppendEntries reply: {Term:1 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.446396 [2] becomes Candidate (currentTerm=2); log=[{5 1}]
22:39:23.446824 [2] election timer started (201ms), term=2
22:39:23.446851 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:0 LastLogTerm:1}
22:39:23.446844 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:0 LastLogTerm:1}
22:39:23.454316 [0] RequestVote: {Term:2 CandidateId:2 LastLogIndex:0 LastLogTerm:1} [currentTerm=1, votedFor=1, log index/term=(0, 1)]
22:39:23.454371 [0] ... term out of date in RequestVote
22:39:23.454418 [0] becomes Follower with term=2; log=[{5 1}]
22:39:23.454889 [0] ... RequestVote reply: &{Term:2 VoteGranted:true}
22:39:23.455086 [0] election timer started (200ms), term=2
22:39:23.455866 [0] in election timer term changed from 1 to 2, bailing out
22:39:23.455868 [2] received RequestVoteReply {Term:2 VoteGranted:true}
22:39:23.456011 [2] wins election with 2 votes
22:39:23.456122 [2] becomes Leader; term=2, nextIndex=map[0:1 1:1], matchIndex=map[0:-1 1:-1]; log=[{5 1}]
22:39:23.456461 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.456480 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.457298 [2] in election timer state=Leader, bailing out
22:39:23.462215 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.462517 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.463041 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.507344 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.507361 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.509097 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.509380 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.509738 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.557668 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.557734 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.563609 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.564029 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.564599 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.608206 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.608272 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.613099 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.613423 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.613842 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.658572 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.658649 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.661519 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.661836 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.662239 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.708908 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.708911 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.712826 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.713170 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.713607 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.760051 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.760053 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.761860 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.762161 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.762501 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.810427 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.810435 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.814427 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.814757 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.815135 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.823293 [TEST] Restart 1
22:39:23.824290 [1] listening at [::]:36221
22:39:23.824424 [TEST] Reconnect 1
22:39:23.826965 [1] election timer started (232ms), term=1
22:39:23.861479 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.861528 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.864336 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.864387 [1] ... term out of date in AppendEntries
22:39:23.864440 [1] becomes Follower with term=2; log=[{5 1}]
22:39:23.865154 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.865360 [1] election timer started (235ms), term=2
22:39:23.865419 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.865884 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.866314 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:-1]; commitIndex := -1
22:39:23.866460 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
22:39:23.867291 [1] in election timer term changed from 1 to 2, bailing out
22:39:23.912088 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.912096 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.918462 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.918494 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.918904 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.919000 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.919449 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
22:39:23.919629 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
22:39:23.962287 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.962297 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.965159 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.965484 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.965868 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
22:39:23.966041 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:-1}
22:39:23.966343 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:23.966735 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]; commitIndex := -1
22:39:23.997780 [2] Submit received by Leader: 6
22:39:23.998265 [2] ... log=[{5 1} {6 2}]
22:39:23.998683 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:6 Term:2}] LeaderCommit:-1}
22:39:23.998705 [2] sending AppendEntries to 0: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:6 Term:2}] LeaderCommit:-1}
22:39:24.003043 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:6 Term:2}] LeaderCommit:-1}
22:39:24.003146 [0] ... inserting entries [{6 2}] from index 1
22:39:24.003235 [0] ... log is now: [{5 1} {6 2}]
22:39:24.003557 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:24.003965 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:1], matchIndex := map[0:1 1:0]; commitIndex := 1
22:39:24.004015 [2] leader sets commitIndex := 1
22:39:24.004184 [2] commitChanSender entries=[{5 1} {6 2}], savedLastApplied=-1
22:39:24.004273 [TEST] collectCommits(2) got {Command:5 Index:0 Term:2}
22:39:24.004335 [TEST] collectCommits(2) got {Command:6 Index:1 Term:2}
22:39:24.004425 [2] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:2 PrevLogIndex:1 PrevLogTerm:2 Entries:[] LeaderCommit:1}
22:39:24.004507 [2] sending AppendEntries to 1: ni=1, args={Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:6 Term:2}] LeaderCommit:1}
22:39:24.004694 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:6 Term:2}] LeaderCommit:-1}
22:39:24.004763 [1] ... inserting entries [{6 2}] from index 1
22:39:24.004835 [1] ... log is now: [{5 1} {6 2}]
22:39:24.005181 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:24.005527 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:24.008716 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:1 PrevLogTerm:2 Entries:[] LeaderCommit:1}
22:39:24.008761 [0] ... setting commitIndex=1
22:39:24.009061 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:24.009215 [0] commitChanSender entries=[{5 1} {6 2}], savedLastApplied=-1
22:39:24.009347 [TEST] collectCommits(0) got {Command:5 Index:0 Term:2}
22:39:24.009400 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:24.009423 [TEST] collectCommits(0) got {Command:6 Index:1 Term:2}
22:39:24.010436 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:6 Term:2}] LeaderCommit:1}
22:39:24.010484 [1] ... setting commitIndex=1
22:39:24.010786 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:24.010965 [1] commitChanSender entries=[{5 1} {6 2}], savedLastApplied=-1
22:39:24.011111 [TEST] collectCommits(1) got {Command:5 Index:0 Term:2}
22:39:24.011175 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:24.011229 [TEST] collectCommits(1) got {Command:6 Index:1 Term:2}
22:39:24.055116 [2] sending AppendEntries to 1: ni=2, args={Term:2 LeaderId:2 PrevLogIndex:1 PrevLogTerm:2 Entries:[] LeaderCommit:1}
22:39:24.055127 [2] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:2 PrevLogIndex:1 PrevLogTerm:2 Entries:[] LeaderCommit:1}
22:39:24.057048 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:1 PrevLogTerm:2 Entries:[] LeaderCommit:1}
22:39:24.057380 [0] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:24.057759 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:24.060877 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:1 PrevLogTerm:2 Entries:[] LeaderCommit:1}
22:39:24.061236 [1] AppendEntries reply: {Term:2 Success:true ConflictIndex:0 ConflictTerm:0}
22:39:24.061646 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]; commitIndex := 1
22:39:24.099638 [0] becomes Dead
22:39:24.099813 [0] commitChanSender done
22:39:24.099831 [1] becomes Dead
22:39:24.100017 [1] commitChanSender done
22:39:24.100022 [2] becomes Dead
22:39:24.100160 [2] commitChanSender done
--- PASS: TestCrashAfterSubmit (1.20s)
PASS
22:39:24.105874 [1] in election timer state=Dead, bailing out
22:39:24.105888 [0] in election timer state=Dead, bailing out
ok  	github.com/eliben/raft	26.781s
